{"version":3,"file":"js/app.2d6c1b32.js","mappings":"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","sources":["webpack://vue3-json-schema-form/./src/components/MonacoEditor.tsx","webpack://vue3-json-schema-form/./src/lib/context.ts","webpack://vue3-json-schema-form/./src/lib/types.ts","webpack://vue3-json-schema-form/./src/lib/utils.ts","webpack://vue3-json-schema-form/./src/lib/theme.tsx","webpack://vue3-json-schema-form/./src/lib/fields/NumberField.tsx","webpack://vue3-json-schema-form/./src/lib/fields/StringField.tsx","webpack://vue3-json-schema-form/./src/lib/fields/ObjectField.tsx","webpack://vue3-json-schema-form/./src/lib/fields/ArrayField.tsx","webpack://vue3-json-schema-form/./src/lib/fields/IntegerField.tsx","webpack://vue3-json-schema-form/./src/lib/fields/BooleanField.tsx","webpack://vue3-json-schema-form/./src/lib/fields/MultiSchemaField.tsx","webpack://vue3-json-schema-form/./src/lib/SchemaItem.tsx","webpack://vue3-json-schema-form/./src/lib/validator.ts","webpack://vue3-json-schema-form/./src/lib/SchemaForm.tsx","webpack://vue3-json-schema-form/./src/demos/Simple.ts","webpack://vue3-json-schema-form/./src/demos/Nested.ts","webpack://vue3-json-schema-form/./src/demos/Arrays.ts","webpack://vue3-json-schema-form/./src/lib/theme-default/FormItem.tsx","webpack://vue3-json-schema-form/./src/demos/SliderWidget.tsx","webpack://vue3-json-schema-form/./src/demos/Number.ts","webpack://vue3-json-schema-form/./src/demos/References.ts","webpack://vue3-json-schema-form/./src/demos/Dependencies.ts","webpack://vue3-json-schema-form/./src/demos/OneOf.ts","webpack://vue3-json-schema-form/./src/demos/AnyOf.ts","webpack://vue3-json-schema-form/./src/demos/customWidgets/ColorPickerWidget.tsx","webpack://vue3-json-schema-form/./src/demos/customWidgets/DatePickerWidget.tsx","webpack://vue3-json-schema-form/./src/demos/customWidgets/PasswordWidget.tsx","webpack://vue3-json-schema-form/./src/demos/Widgets.ts","webpack://vue3-json-schema-form/./src/demos/customWidgets/UploadWidget.tsx","webpack://vue3-json-schema-form/./src/demos/Files.ts","webpack://vue3-json-schema-form/./src/demos/CustomFormat.ts","webpack://vue3-json-schema-form/./src/demos/Hidden.ts","webpack://vue3-json-schema-form/./src/demos/index.ts","webpack://vue3-json-schema-form/./src/lib/theme-default/Widgets/SelectWidget.tsx","webpack://vue3-json-schema-form/./src/lib/theme-default/Widgets/TextWidget.tsx","webpack://vue3-json-schema-form/./src/lib/theme-default/Widgets/NumberWidget.tsx","webpack://vue3-json-schema-form/./src/lib/theme-default/Widgets/RadioWidget.tsx","webpack://vue3-json-schema-form/./src/lib/theme-default/Widgets/CheckboxWidget.tsx","webpack://vue3-json-schema-form/./src/lib/theme-default/Widgets/IntegerWidget.tsx","webpack://vue3-json-schema-form/./src/lib/theme-default/Widgets/BooleanWidget.tsx","webpack://vue3-json-schema-form/./src/lib/theme-default/FormWrapper.tsx","webpack://vue3-json-schema-form/./src/lib/theme-default/BtnWrapper.tsx","webpack://vue3-json-schema-form/./src/lib/theme-default/index.tsx","webpack://vue3-json-schema-form/./src/plugins/customFormat.tsx","webpack://vue3-json-schema-form/./src/App.tsx","webpack://vue3-json-schema-form/./src/main.ts","webpack://vue3-json-schema-form/./src/plugins/customKeyword.ts","webpack://vue3-json-schema-form/webpack/bootstrap","webpack://vue3-json-schema-form/webpack/runtime/amd options","webpack://vue3-json-schema-form/webpack/runtime/chunk loaded","webpack://vue3-json-schema-form/webpack/runtime/compat get default export","webpack://vue3-json-schema-form/webpack/runtime/define property getters","webpack://vue3-json-schema-form/webpack/runtime/ensure chunk","webpack://vue3-json-schema-form/webpack/runtime/get javascript chunk filename","webpack://vue3-json-schema-form/webpack/runtime/get mini-css chunk filename","webpack://vue3-json-schema-form/webpack/runtime/global","webpack://vue3-json-schema-form/webpack/runtime/harmony module decorator","webpack://vue3-json-schema-form/webpack/runtime/hasOwnProperty shorthand","webpack://vue3-json-schema-form/webpack/runtime/load script","webpack://vue3-json-schema-form/webpack/runtime/make namespace object","webpack://vue3-json-schema-form/webpack/runtime/node module decorator","webpack://vue3-json-schema-form/webpack/runtime/publicPath","webpack://vue3-json-schema-form/webpack/runtime/jsonp chunk loading","webpack://vue3-json-schema-form/webpack/startup"],"sourcesContent":["import {\n  defineComponent,\n  onBeforeMount,\n  onMounted,\n  PropType,\n  ref,\n  shallowRef,\n  watch\n} from 'vue'\nimport Monaco from 'monaco-editor/esm/vs/editor/editor.api'\nimport { createUseStyles } from 'vue-jss'\n\nconst useStyles = createUseStyles({\n  container: {\n    border: '1px solid #eee',\n    display: 'flex',\n    flexDirection: 'column',\n    borderRadius: 5\n  },\n  title: {\n    backgroundColor: '#eee',\n    padding: '10px 0',\n    paddingLeft: 20\n  },\n  code: {\n    flexGrow: 1\n  }\n})\n\nexport default defineComponent({\n  name: 'MonacoEditor',\n  props: {\n    code: {\n      type: String as PropType<string>,\n      required: true\n    },\n    onChange: {\n      type: Function as PropType<\n        (value: string, event: Monaco.editor.IModelContentChangedEvent) => void\n      >,\n      required: true\n    },\n    title: {\n      type: String as PropType<string>,\n      required: true\n    }\n  },\n  setup(props) {\n    const editorRef = shallowRef()\n    const containerRef = ref()\n    let _subscription: Monaco.IDisposable | undefined\n    let __preventTriggerChangeEvent = false\n\n    onMounted(() => {\n      const editor = (editorRef.value = Monaco.editor.create(\n        containerRef.value,\n        {\n          value: props.code,\n          language: 'json',\n          formatOnPaste: true,\n          tabSize: 2,\n          minimap: {\n            enabled: false\n          }\n        }\n      ))\n\n      _subscription = editor.onDidChangeModelContent((event) => {\n        if (!__preventTriggerChangeEvent) {\n          props.onChange(editor.getValue(), event)\n        }\n      })\n    })\n\n    onBeforeMount(() => {\n      if (_subscription) {\n        _subscription.dispose()\n      }\n    })\n\n    watch(\n      () => props.code,\n      (v) => {\n        const editor = editorRef.value\n        const model = editor.getModel()\n        if (v !== model.getValue()) {\n          editor.pushUndoStop()\n          __preventTriggerChangeEvent = true\n          model.pushEditOperations(\n            [],\n            [\n              {\n                range: model.getFullModelRange(),\n                text: v\n              }\n            ]\n          )\n          editor.pushUndoStop()\n          __preventTriggerChangeEvent = false\n        }\n      }\n    )\n\n    const classesRef = useStyles()\n\n    return () => {\n      const classes = classesRef.value\n\n      return (\n        <div class={classes.container}>\n          <div class={classes.title}>\n            <span>{props.title}</span>\n          </div>\n          <div class={classes.code} ref={containerRef}></div>\n        </div>\n      )\n    }\n  }\n})\n","import { inject, Ref } from 'vue'\r\nimport { CommonFieldDefine, Theme, CommonWidgetDefine, Schema } from './types'\r\n\r\nexport const SchemaFormContextKey = Symbol()\r\n\r\nexport function useVJSFContext() {\r\n  const context:\r\n    | {\r\n        theme: Theme\r\n        SchemaItem: CommonFieldDefine\r\n        formatMapRef: Ref<{ [key: string]: CommonWidgetDefine }>\r\n        updateSchemaRef: Ref<(s: Schema) => Schema>\r\n      }\r\n    | undefined = inject(SchemaFormContextKey)\r\n  if (!context) {\r\n    throw Error('SchemaForm should be used!')\r\n  }\r\n\r\n  return context\r\n}\r\n","import { defineComponent, Prop, PropType } from 'vue'\r\nimport { DefineComponent } from 'vue'\r\nimport { ErrorSchema } from './validator'\r\nimport {\r\n  FormatDefinition,\r\n  KeywordDefinition,\r\n  CodeKeywordDefinition,\r\n  MacroKeywordDefinition\r\n} from 'ajv'\r\nexport enum SchemaTypes {\r\n  'NUMBER' = 'number',\r\n  'INTEGER' = 'integer',\r\n  'STRING' = 'string',\r\n  'OBJECT' = 'object',\r\n  'ARRAY' = 'array',\r\n  'BOOLEAN' = 'boolean'\r\n}\r\n\r\ntype SchemaRef = { $ref: string }\r\n\r\nexport interface Schema {\r\n  type?: SchemaTypes | string\r\n  const?: any\r\n  format?: string\r\n  title?: string\r\n  default?: any\r\n  properties?: {\r\n    [key: string]: Schema\r\n  }\r\n  definitions?: { [key: string]: Schema }\r\n  $ref?: string\r\n  items?: Schema | Schema[] | SchemaRef\r\n  uniqueItems?: any\r\n  dependencies?: {\r\n    [key: string]: string[] | Schema | SchemaRef\r\n  }\r\n  dependentRequired?: {\r\n    [key: string]: string[] | Schema | SchemaRef\r\n  }\r\n  oneOf?: Schema[]\r\n  anyOf?: Schema[]\r\n  allOf?: Schema[]\r\n  required?: string[]\r\n  enum?: any[]\r\n  enumNames?: any[]\r\n  enumKeyValue?: any[]\r\n  additionalProperties?: any\r\n  additionalItems?: Schema\r\n  minLength?: number\r\n  maxLength?: number\r\n  minimum?: number\r\n  maximum?: number\r\n  multipleOf?: number\r\n  exclusiveMaximum?: number\r\n  exclusiveMinimum?: number\r\n}\r\n\r\nexport const SchemaPropsDefine = {\r\n  schema: {\r\n    type: Object as PropType<Schema>,\r\n    required: true\r\n  },\r\n  value: {\r\n    required: true\r\n  },\r\n  rootSchema: {\r\n    type: Object as PropType<Schema>\r\n  },\r\n  onChange: {\r\n    type: Function as PropType<(...v: any[]) => void>,\r\n    required: true\r\n  },\r\n  errorSchema: {\r\n    type: Object as PropType<ErrorSchema>,\r\n    required: true\r\n  },\r\n  uiSchema: {\r\n    type: Object as PropType<UISchema>\r\n  },\r\n  customFormats: {\r\n    type: [Array, Object] as PropType<CustomFormat[] | CustomFormat>\r\n  },\r\n  isRequired: {\r\n    type: Boolean as PropType<boolean>\r\n  },\r\n  rootFormData: {\r\n    default: {}\r\n  },\r\n  curNodePath: {}\r\n} as const\r\n\r\nexport const MultiSchemaPropsDefine = {\r\n  ...SchemaPropsDefine,\r\n  options: {\r\n    type: Array as PropType<Schema[]>,\r\n    required: true\r\n  }\r\n} as const\r\n\r\n// 手动声明 SchemaItem 组件的类型\r\n\r\nexport type CommonFieldDefine = DefineComponent<typeof SchemaPropsDefine>\r\n\r\n// Theme 相关类型和接口\r\n\r\n// 通用 widget propsType\r\nexport const CommonWidgetPropsDefine = {\r\n  value: {\r\n    required: true\r\n  },\r\n  schema: {\r\n    type: Object as PropType<Schema>,\r\n    required: true\r\n  },\r\n  onChange: {\r\n    type: Function as PropType<(...v: any[]) => void>,\r\n    required: true\r\n  },\r\n  errors: {\r\n    type: Array as PropType<string[]>\r\n  },\r\n  isRequired: {\r\n    type: Boolean as PropType<boolean>\r\n  },\r\n  uiSchema: {\r\n    type: Object as PropType<UISchema>\r\n  }\r\n} as const\r\nconst CommonHelperComponent = defineComponent({\r\n  props: CommonWidgetPropsDefine\r\n})\r\nexport type CommonWidgetDefine = typeof CommonHelperComponent\r\n\r\n// 特殊 widget propsType 和 widget component type\r\nexport const SelectWidgetPropsDefine = {\r\n  ...CommonWidgetPropsDefine,\r\n  options: {\r\n    type: Array as PropType<{ value: string; label: any }[]>,\r\n    required: true\r\n  }\r\n} as const\r\n\r\nconst SelectHelperComponent = defineComponent({\r\n  props: SelectWidgetPropsDefine\r\n})\r\n\r\nexport type SelectWidgetDefine = typeof SelectHelperComponent\r\n\r\n// widgetName\r\nexport enum WidgetName {\r\n  SelectWidget = 'SelectWidget',\r\n  TextWidget = 'TextWidget',\r\n  NumberWidget = 'NumberWidget',\r\n  RadioWidget = 'RadioWidget',\r\n  CheckboxWidget = 'CheckboxWidget',\r\n  IntegerWidget = 'IntegerWidget',\r\n  BooleanWidget = 'BooleanWidget'\r\n}\r\n\r\nexport interface Theme {\r\n  widgets: {\r\n    SelectWidget: SelectWidgetDefine\r\n    TextWidget: CommonWidgetDefine\r\n    NumberWidget: CommonWidgetDefine\r\n    RadioWidget: SelectWidgetDefine\r\n    CheckboxWidget: SelectWidgetDefine\r\n    IntegerWidget: CommonWidgetDefine\r\n    BooleanWidget: CommonWidgetDefine\r\n  }\r\n  wrapper?: {\r\n    [key: string]: ReturnType<typeof defineComponent>\r\n  }\r\n}\r\n\r\n// Validator 相关\r\nexport interface ContextRef {\r\n  doValidate: () => Promise<{\r\n    valid: boolean\r\n    errors: any[]\r\n  }>\r\n}\r\n\r\n// custom Widget\r\nexport type UISchema = {\r\n  widget?: string | CommonWidgetDefine\r\n  properties?: {\r\n    [key: string]: UISchema\r\n  }\r\n  items?: UISchema | UISchema[]\r\n} & {\r\n  [key: string]: any\r\n}\r\n\r\n// customFormat\r\nexport interface CustomFormat {\r\n  name: string\r\n  definition: FormatDefinition<string | number>\r\n  component: CommonWidgetDefine\r\n}\r\n\r\n// customKeyword\r\n// interface MacroKeyword {\r\n//   name: string\r\n//   definition: KeywordDefinition\r\n//   updateSchema: (originSchema: Schema) => Schema\r\n// }\r\nexport type CustomKeyword = CodeKeywordDefinition | MacroKeywordDefinition\r\n","import Ajv from 'ajv/dist/2020'\r\n\r\nimport { Schema, UISchema } from './types'\r\n\r\nimport jsonpointer from 'jsonpointer'\r\nimport union from 'lodash.union'\r\nimport mergeAllOf from 'json-schema-merge-allof'\r\n\r\nexport function isObject(thing: any) {\r\n  return typeof thing === 'object' && thing !== null && !Array.isArray(thing)\r\n}\r\n\r\nexport function isEmptyObject(thing: any) {\r\n  return isObject(thing) && Object.keys(thing).length === 0\r\n}\r\n\r\nexport function hasOwnProperty(obj: any, key: string) {\r\n  /**\r\n   * 直接调用`obj.hasOwnProperty`有可能会因为\r\n   * obj 覆盖了 prototype 上的 hasOwnProperty 而产生错误\r\n   */\r\n  return Object.prototype.hasOwnProperty.call(obj, key)\r\n}\r\n\r\n// import { isObject, hasOwnProperty, getSchemaType, guessType } from './utils'\r\n// import { validateData } from './validator'\r\n\r\n// TODO: 应该跟SchemaForm的instance保持一致\r\nconst defaultInstance = new Ajv()\r\nexport function validateData(schema: any, data: any) {\r\n  const valid = defaultInstance.validate(schema, data)\r\n  return {\r\n    valid,\r\n    errors: defaultInstance.errors\r\n  }\r\n}\r\n\r\n// function resolveSchema(schema: any, data: any = {}) {}\r\n\r\nexport function resolveSchema(schema: Schema, rootSchema = {}, formData = {}) {\r\n  if (hasOwnProperty(schema, '$ref')) {\r\n    return resolveReference(schema, rootSchema, formData)\r\n  } else if (\r\n    hasOwnProperty(schema, 'dependentRequired') ||\r\n    hasOwnProperty(schema, 'dependentSchemas')\r\n  ) {\r\n    const resolvedSchema = resolveDependencies(schema, rootSchema, formData)\r\n    return retrieveSchema(resolvedSchema, rootSchema, formData)\r\n  } else if (hasOwnProperty(schema, 'allOf') && Array.isArray(schema.allOf)) {\r\n    return {\r\n      ...schema,\r\n      allOf: schema.allOf.map((allOfSubschema) =>\r\n        retrieveSchema(allOfSubschema, rootSchema, formData)\r\n      )\r\n    }\r\n  } else {\r\n    // No $ref or dependencies attribute found, returning the original schema.\r\n    return schema\r\n  }\r\n}\r\n\r\nexport function retrieveSchema(\r\n  schema: any,\r\n  rootSchema = {},\r\n  formData: any = {}\r\n): Schema {\r\n  if (!isObject(schema)) {\r\n    return {} as Schema\r\n  }\r\n  let resolvedSchema = resolveSchema(schema, rootSchema, formData)\r\n\r\n  // TODO: allOf and additionalProperties not implemented\r\n  if ('allOf' in schema) {\r\n    try {\r\n      resolvedSchema = mergeAllOf({\r\n        // TODO: Schema type not suitable\r\n        ...resolvedSchema,\r\n        allOf: resolvedSchema.allOf\r\n      } as any) as Schema\r\n    } catch (e) {\r\n      console.warn('could not merge subschemas in allOf:\\n' + e)\r\n      const { allOf, ...resolvedSchemaWithoutAllOf } = resolvedSchema\r\n      return resolvedSchemaWithoutAllOf\r\n    }\r\n  }\r\n  const hasAdditionalProperties =\r\n    resolvedSchema.hasOwnProperty('additionalProperties') &&\r\n    resolvedSchema.additionalProperties !== false\r\n  if (hasAdditionalProperties) {\r\n    // put formData existing additional properties into schema\r\n    return stubExistingAdditionalProperties(\r\n      resolvedSchema,\r\n      rootSchema,\r\n      formData\r\n    )\r\n  }\r\n\r\n  return resolvedSchema\r\n}\r\n\r\nexport const ADDITIONAL_PROPERTY_FLAG = '__additional_property'\r\n// This function will create new \"properties\" items for each key in our formData\r\nexport function stubExistingAdditionalProperties(\r\n  schema: Schema,\r\n  rootSchema: Schema = {},\r\n  formData: any = {}\r\n) {\r\n  // Clone the schema so we don't ruin the consumer's original\r\n  schema = {\r\n    ...schema,\r\n    properties: { ...schema.properties }\r\n  }\r\n\r\n  Object.keys(formData).forEach((key) => {\r\n    if ((schema as any).properties.hasOwnProperty(key)) {\r\n      // No need to stub, our schema already has the property\r\n      return\r\n    }\r\n\r\n    let additionalProperties\r\n    if (schema.additionalProperties.hasOwnProperty('$ref')) {\r\n      additionalProperties = retrieveSchema(\r\n        { $ref: schema.additionalProperties['$ref'] },\r\n        rootSchema,\r\n        formData\r\n      )\r\n    } else if (schema.additionalProperties.hasOwnProperty('type')) {\r\n      additionalProperties = { ...schema.additionalProperties }\r\n    } else {\r\n      additionalProperties = { type: guessType(formData[key]) }\r\n    }\r\n\r\n    // The type of our new key should match the additionalProperties value;\r\n    ;(schema as any).properties[key] = additionalProperties\r\n    // Set our additional property flag so we know it was dynamically added\r\n    ;(schema as any).properties[key][ADDITIONAL_PROPERTY_FLAG] = true\r\n  })\r\n\r\n  return schema\r\n}\r\n\r\n// export function processSchema(\r\n//   schema: any,\r\n//   rootSchema: any = {},\r\n//   data: any = {}\r\n// ): Schema {\r\n//   if (hasOwnProperty(schema, '$ref')) {\r\n//     return resolveReference(schema, rootSchema, data)\r\n//   }\r\n//   if (hasOwnProperty(schema, 'dependencies')) {\r\n//     const resolvedSchema = resolveSchema(schema)\r\n//   }\r\n// }\r\n\r\nfunction resolveReference(schema: any, rootSchema: any, formData: any): Schema {\r\n  // Retrieve the referenced schema definition.\r\n  const $refSchema = findSchemaDefinition(schema.$ref, rootSchema)\r\n  // Drop the $ref property of the source schema.\r\n  const { $ref, ...localSchema } = schema\r\n  // Update referenced schema definition with local schema properties.\r\n  return retrieveSchema({ ...$refSchema, ...localSchema }, rootSchema, formData)\r\n}\r\n\r\nexport function findSchemaDefinition($ref: string, rootSchema = {}): Schema {\r\n  console.log(rootSchema)\r\n\r\n  const origRef = $ref\r\n  if ($ref.startsWith('#')) {\r\n    // Decode URI fragment representation.\r\n    $ref = decodeURIComponent($ref.substring(1))\r\n  } else {\r\n    throw new Error(`Could not find a definition for ${origRef}.`)\r\n  }\r\n  const current = jsonpointer.get(rootSchema, $ref)\r\n\r\n  if (current === undefined) {\r\n    throw new Error(`Could not find a definition for ${origRef}.`)\r\n  }\r\n  if (hasOwnProperty(current, '$ref')) {\r\n    // return { ...current, findSchemaDefinition(current.$ref, rootSchema) }  ?\r\n    return findSchemaDefinition(current.$ref, rootSchema)\r\n  }\r\n  return current\r\n}\r\n\r\nfunction resolveDependencies(\r\n  schema: any,\r\n  rootSchema: any,\r\n  formData: any\r\n): Schema {\r\n  // Drop the dependencies from the source schema.\r\n  let {\r\n    dependentRequired = {}, // eslint-disable-line\r\n    dependentSchemas = {}, // eslint-disable-line\r\n    ...resolvedSchema\r\n  } = schema // eslint-disable-line\r\n  if ('oneOf' in resolvedSchema) {\r\n    resolvedSchema =\r\n      resolvedSchema.oneOf[getMatchingOption(formData, resolvedSchema.oneOf)]\r\n  } else if ('anyOf' in resolvedSchema) {\r\n    resolvedSchema =\r\n      resolvedSchema.anyOf[getMatchingOption(formData, resolvedSchema.anyOf)]\r\n  }\r\n  if (dependentRequired) {\r\n    return processDependentProperties(\r\n      dependentRequired,\r\n      resolvedSchema,\r\n      rootSchema,\r\n      formData\r\n    )\r\n  }\r\n  if (dependentSchemas) {\r\n    return processDependentSchema(\r\n      dependentSchemas,\r\n      resolvedSchema,\r\n      rootSchema,\r\n      formData\r\n    )\r\n  }\r\n  return resolvedSchema\r\n}\r\n\r\nfunction processDependentProperties(\r\n  dependencies: any,\r\n  resolvedSchema: any,\r\n  rootSchema: any,\r\n  formData: any\r\n): Schema {\r\n  // Process dependencies updating the local schema properties as appropriate.\r\n  for (const dependencyKey in dependencies) {\r\n    // Skip this dependency if its trigger property is not present.\r\n    if (formData[dependencyKey] === undefined) {\r\n      continue\r\n    }\r\n    // Skip this dependency if it is not included in the schema (such as when dependencyKey is itself a hidden dependency.)\r\n    if (\r\n      resolvedSchema.properties &&\r\n      !(dependencyKey in resolvedSchema.properties)\r\n    ) {\r\n      continue\r\n    }\r\n    const { [dependencyKey]: dependencyValue, ...remainingDependencies } =\r\n      dependencies\r\n    resolvedSchema = withDependentProperties(resolvedSchema, dependencyValue)\r\n    return processDependentProperties(\r\n      remainingDependencies,\r\n      resolvedSchema,\r\n      rootSchema,\r\n      formData\r\n    )\r\n  }\r\n  return resolvedSchema\r\n}\r\nfunction processDependentSchema(\r\n  dependencies: any,\r\n  resolvedSchema: any,\r\n  rootSchema: any,\r\n  formData: any\r\n): Schema {\r\n  // Process dependencies updating the local schema properties as appropriate.\r\n  for (const dependencyKey in dependencies) {\r\n    // Skip this dependency if its trigger property is not present.\r\n    if (formData[dependencyKey] === undefined) {\r\n      continue\r\n    }\r\n    // Skip this dependency if it is not included in the schema (such as when dependencyKey is itself a hidden dependency.)\r\n    if (\r\n      resolvedSchema.properties &&\r\n      !(dependencyKey in resolvedSchema.properties)\r\n    ) {\r\n      continue\r\n    }\r\n    const { [dependencyKey]: dependencyValue, ...remainingDependencies } =\r\n      dependencies\r\n    resolvedSchema = withDependentSchema(\r\n      resolvedSchema,\r\n      rootSchema,\r\n      formData,\r\n      dependencyKey,\r\n      dependencyValue\r\n    )\r\n    return processDependentSchema(\r\n      remainingDependencies,\r\n      resolvedSchema,\r\n      rootSchema,\r\n      formData\r\n    )\r\n  }\r\n  return resolvedSchema\r\n}\r\n// function processDependencies(\r\n//   dependencies: any,\r\n//   resolvedSchema: any,\r\n//   rootSchema: any,\r\n//   formData: any\r\n// ): Schema {\r\n//   // Process dependencies updating the local schema properties as appropriate.\r\n//   for (const dependencyKey in dependencies) {\r\n//     // Skip this dependency if its trigger property is not present.\r\n//     if (formData[dependencyKey] === undefined) {\r\n//       continue\r\n//     }\r\n//     // Skip this dependency if it is not included in the schema (such as when dependencyKey is itself a hidden dependency.)\r\n//     if (\r\n//       resolvedSchema.properties &&\r\n//       !(dependencyKey in resolvedSchema.properties)\r\n//     ) {\r\n//       continue\r\n//     }\r\n//     const { [dependencyKey]: dependencyValue, ...remainingDependencies } =\r\n//       dependencies\r\n//     if (Array.isArray(dependencyValue)) {\r\n//       resolvedSchema = withDependentProperties(resolvedSchema, dependencyValue)\r\n//     } else if (isObject(dependencyValue)) {\r\n//       resolvedSchema = withDependentSchema(\r\n//         resolvedSchema,\r\n//         rootSchema,\r\n//         formData,\r\n//         dependencyKey,\r\n//         dependencyValue\r\n//       )\r\n//     }\r\n//     return processDependencies(\r\n//       remainingDependencies,\r\n//       resolvedSchema,\r\n//       rootSchema,\r\n//       formData\r\n//     )\r\n//   }\r\n//   return resolvedSchema\r\n// }\r\n\r\nfunction withDependentProperties(schema: any, additionallyRequired: any) {\r\n  if (!additionallyRequired || !Array.isArray(additionallyRequired)) {\r\n    return schema\r\n  }\r\n  // skip the additionallyRequired if it is not included in schema\r\n  additionallyRequired.forEach((item, index) => {\r\n    if (!schema.properties[item]) {\r\n      additionallyRequired.splice(index, 1)\r\n    }\r\n  })\r\n  const required = Array.isArray(schema.required)\r\n    ? Array.from(new Set([...schema.required, ...additionallyRequired]))\r\n    : additionallyRequired\r\n  return { ...schema, required: required }\r\n}\r\n\r\nfunction withDependentSchema(\r\n  schema: any,\r\n  rootSchema: any,\r\n  formData: any,\r\n  dependencyKey: any,\r\n  dependencyValue: any\r\n) {\r\n  // retrieveSchema\r\n  const { oneOf, ...dependentSchema } = retrieveSchema(\r\n    dependencyValue,\r\n    rootSchema,\r\n    formData\r\n  )\r\n\r\n  schema = mergeSchemas(schema, dependentSchema)\r\n  // Since it does not contain oneOf, we return the original schema.\r\n  if (oneOf === undefined) {\r\n    return schema\r\n  } else if (!Array.isArray(oneOf)) {\r\n    throw new Error(`invalid: it is some ${typeof oneOf} instead of an array`)\r\n  }\r\n  // Resolve $refs inside oneOf.\r\n  const resolvedOneOf = oneOf.map((subschema) =>\r\n    hasOwnProperty(subschema, '$ref')\r\n      ? resolveReference(subschema, rootSchema, formData)\r\n      : subschema\r\n  )\r\n  return withExactlyOneSubschema(\r\n    schema,\r\n    rootSchema,\r\n    formData,\r\n    dependencyKey,\r\n    resolvedOneOf\r\n  )\r\n}\r\n\r\nfunction withExactlyOneSubschema(\r\n  schema: any,\r\n  rootSchema: any,\r\n  formData: any,\r\n  dependencyKey: any,\r\n  oneOf: any\r\n) {\r\n  const validSubschemas = oneOf.filter((subschema: any) => {\r\n    if (!subschema.properties) {\r\n      return false\r\n    }\r\n    const { [dependencyKey]: conditionPropertySchema } = subschema.properties\r\n    if (conditionPropertySchema) {\r\n      const conditionSchema = {\r\n        type: 'object',\r\n        properties: {\r\n          [dependencyKey]: conditionPropertySchema\r\n        }\r\n      }\r\n      // TODO: validate formdata\r\n      const { errors } = validateData(conditionSchema, formData)\r\n      return !errors || errors.length === 0\r\n    }\r\n  })\r\n  if (validSubschemas.length !== 1) {\r\n    console.warn(\r\n      \"ignoring oneOf in dependencies because there isn't exactly one subschema that is valid\"\r\n    )\r\n    return schema\r\n  }\r\n  // debugger\r\n  const subschema = validSubschemas[0]\r\n  const { [dependencyKey]: conditionPropertySchema, ...dependentSubschema } =\r\n    subschema.properties\r\n  const dependentSchema = { ...subschema, properties: dependentSubschema }\r\n  return mergeSchemas(\r\n    schema,\r\n    // retrieveSchema\r\n    retrieveSchema(dependentSchema, rootSchema, formData)\r\n  )\r\n}\r\n\r\n// Recursively merge deeply nested schemas.\r\n// The difference between mergeSchemas and mergeObjects\r\n// is that mergeSchemas only concats arrays for\r\n// values under the \"required\" keyword, and when it does,\r\n// it doesn't include duplicate values.\r\nexport function mergeSchemas(obj1: any, obj2: any) {\r\n  const acc = Object.assign({}, obj1) // Prevent mutation of source object.\r\n  return Object.keys(obj2).reduce((acc, key) => {\r\n    const left = obj1 ? obj1[key] : {},\r\n      right = obj2[key]\r\n    if (obj1 && hasOwnProperty(obj1, key) && isObject(right)) {\r\n      acc[key] = mergeSchemas(left, right)\r\n    } else if (\r\n      obj1 &&\r\n      obj2 &&\r\n      (getSchemaType(obj1) === 'object' || getSchemaType(obj2) === 'object') &&\r\n      key === 'required' &&\r\n      Array.isArray(left) &&\r\n      Array.isArray(right)\r\n    ) {\r\n      // Don't include duplicate values when merging\r\n      // \"required\" fields.\r\n      acc[key] = union(left, right)\r\n    } else {\r\n      acc[key] = right\r\n    }\r\n    return acc\r\n  }, acc)\r\n}\r\n\r\n/* Gets the type of a given schema. */\r\nexport function getSchemaType(schema: Schema): string | undefined {\r\n  const { type } = schema\r\n\r\n  if (!type && schema.const) {\r\n    return guessType(schema.const)\r\n  }\r\n\r\n  if (!type && schema.enum) {\r\n    return 'string'\r\n  }\r\n\r\n  if (!type && (schema.properties || schema.additionalProperties)) {\r\n    return 'object'\r\n  }\r\n\r\n  const t: any = type\r\n  if (t instanceof Array && t.length === 2 && t.includes('null')) {\r\n    return t.find((type) => type !== 'null')\r\n  }\r\n\r\n  return type\r\n\r\n  // let { type } = schema\r\n\r\n  // if (type) return type\r\n\r\n  // if (!type && schema.const) {\r\n  //   return guessType(schema.const)\r\n  // }\r\n\r\n  // if (!type && schema.enum) {\r\n  //   // return 'string'\r\n  //   return guessType(schema.enum[0])\r\n  // }\r\n\r\n  // if (!type && (schema.properties || schema.additionalProperties)) {\r\n  //   return 'object'\r\n  // }\r\n\r\n  // console.warn('can not guess schema type, just use object', schema)\r\n  // return 'object'\r\n\r\n  // if (type instanceof Array && type.length === 2 && type.includes('null')) {\r\n  //   return type.find((type) => type !== 'null')\r\n  // }\r\n}\r\n\r\n// In the case where we have to implicitly create a schema, it is useful to know what type to use\r\n//  based on the data we are defining\r\nexport const guessType = function guessType(value: any) {\r\n  if (Array.isArray(value)) {\r\n    return 'array'\r\n  } else if (typeof value === 'string') {\r\n    return 'string'\r\n  } else if (value == null) {\r\n    return 'null'\r\n  } else if (typeof value === 'boolean') {\r\n    return 'boolean'\r\n  } else if (!isNaN(value)) {\r\n    return 'number'\r\n  } else if (typeof value === 'object') {\r\n    return 'object'\r\n  }\r\n  // Default to string if we can't figure it out\r\n  return 'string'\r\n}\r\n\r\nexport function isConstant(schema: Schema) {\r\n  return (\r\n    (Array.isArray(schema.enum) && schema.enum.length === 1) ||\r\n    schema.hasOwnProperty('const')\r\n  )\r\n}\r\n\r\nexport function isSelect(_schema: any, rootSchema: Schema = {}) {\r\n  const schema = retrieveSchema(_schema, rootSchema)\r\n  const altSchemas = schema.oneOf || schema.anyOf\r\n  if (Array.isArray(schema.enum)) {\r\n    return true\r\n  } else if (Array.isArray(altSchemas)) {\r\n    return altSchemas.every((altSchemas) => isConstant(altSchemas))\r\n  }\r\n  return false\r\n}\r\n\r\nexport function isMultiSelect(schema: Schema, rootSchema: Schema = {}) {\r\n  if (!schema.uniqueItems || !schema.items) {\r\n    return false\r\n  }\r\n  return isSelect(schema.items, rootSchema)\r\n}\r\n\r\n// TODO: change oneOf selected based on data\r\nexport function getMatchingOption(formData: any, options: Schema[]) {\r\n  for (let i = 0; i < options.length; i++) {\r\n    const option = options[i]\r\n\r\n    // If the schema describes an object then we need to add slightly more\r\n    // strict matching to the schema, because unless the schema uses the\r\n    // \"requires\" keyword, an object will match the schema as long as it\r\n    // doesn't have matching keys with a conflicting type. To do this we use an\r\n    // \"anyOf\" with an array of requires. This augmentation expresses that the\r\n    // schema should match if any of the keys in the schema are present on the\r\n    // object and pass validation.\r\n    if (option.properties) {\r\n      // Create an \"anyOf\" schema that requires at least one of the keys in the\r\n      // \"properties\" object\r\n      const requiresAnyOf = {\r\n        anyOf: Object.keys(option.properties).map((key) => ({\r\n          required: [key]\r\n        }))\r\n      }\r\n\r\n      let augmentedSchema\r\n\r\n      // If the \"anyOf\" keyword already exists, wrap the augmentation in an \"allOf\"\r\n      if (option.anyOf) {\r\n        // Create a shallow clone of the option\r\n        const { ...shallowClone } = option\r\n\r\n        if (!shallowClone.allOf) {\r\n          shallowClone.allOf = []\r\n        } else {\r\n          // If \"allOf\" already exists, shallow clone the array\r\n          shallowClone.allOf = shallowClone.allOf.slice()\r\n        }\r\n\r\n        shallowClone.allOf.push(requiresAnyOf)\r\n\r\n        augmentedSchema = shallowClone\r\n        console.log(augmentedSchema)\r\n      } else {\r\n        augmentedSchema = Object.assign({}, option, requiresAnyOf)\r\n        console.log(augmentedSchema)\r\n      }\r\n\r\n      // Remove the \"required\" field as it's likely that not all fields have\r\n      // been filled in yet, which will mean that the schema is not valid\r\n      delete augmentedSchema.required\r\n\r\n      if (validateData(augmentedSchema, formData).valid) {\r\n        console.log('type为object，' + '能匹配,' + i)\r\n        return i\r\n      }\r\n    } else if (validateData(options[i], formData).valid) {\r\n      console.log('type为其他类型，' + '能匹配,' + i)\r\n      return i\r\n    }\r\n  }\r\n  return 0\r\n}\r\n\r\nexport function mergeDefaultsWithFormData(defaults: any, formData: any): any {\r\n  if (Array.isArray(formData)) {\r\n    if (!Array.isArray(defaults)) {\r\n      defaults = []\r\n    }\r\n    return formData.map((value, idx) => {\r\n      if (defaults[idx]) {\r\n        return mergeDefaultsWithFormData(defaults[idx], value)\r\n      }\r\n      return value\r\n    })\r\n  } else if (isObject(formData)) {\r\n    const acc = Object.assign({}, defaults) // Prevent mutation of source object.\r\n    return Object.keys(formData).reduce((acc, key) => {\r\n      acc[key] = mergeDefaultsWithFormData(\r\n        defaults ? defaults[key] : {},\r\n        formData[key]\r\n      )\r\n      return acc\r\n    }, acc)\r\n  } else {\r\n    return formData\r\n  }\r\n}\r\n\r\nexport function getDefaultFormState(\r\n  _schema: Schema,\r\n  formData: any\r\n  // rootSchema = {},\r\n  // includeUndefinedValues = false,\r\n) {\r\n  if (!isObject(_schema)) {\r\n    throw new Error('Invalid schema: ' + _schema)\r\n  }\r\n  // const schema = retrieveSchema(_schema, rootSchema, formData)\r\n  const defaults = _schema.default\r\n  // TODO: I guess we don't need to get default from children schema\r\n  // const defaults = computeDefaults(\r\n  //   schema,\r\n  //   _schema.default,\r\n  //   rootSchema,\r\n  //   formData,\r\n  //   includeUndefinedValues\r\n  // );\r\n  if (typeof formData === 'undefined') {\r\n    // No form data? Use schema defaults.\r\n    return defaults\r\n  }\r\n  if (isObject(formData) || Array.isArray(formData)) {\r\n    return mergeDefaultsWithFormData(defaults, formData)\r\n  }\r\n  if (formData === 0 || formData === false || formData === '') {\r\n    return formData\r\n  }\r\n  return formData || defaults\r\n}\r\n\r\nfunction getPathVal(obj: object, path: string, leftDeviation = 0) {\r\n  const pathArr = path.split('.')\r\n  for (let i = 0; i < pathArr.length - leftDeviation; i += 1) {\r\n    // 错误路径或者undefined中断查找\r\n    if (obj === undefined) return undefined\r\n    obj = pathArr[i] === '' ? obj : obj[pathArr[i] as keyof typeof obj]\r\n  }\r\n\r\n  return obj\r\n}\r\nconst regExpression = /{{(.*)}}/\r\nfunction handleExpression(\r\n  rootFormData: any,\r\n  curNodePath: string,\r\n  expression: string,\r\n  callBack: () => void\r\n) {\r\n  if (expression === undefined) return undefined\r\n\r\n  // 检验表达式是否使用 mustache 语法\r\n  const matchExpression = regExpression.exec(expression)\r\n  regExpression.lastIndex = 0 // 重置索引\r\n  if (matchExpression) {\r\n    const code = matchExpression[1].trim()\r\n\r\n    // eslint-disable-next-line no-new-func\r\n    const fn = new Function('parentFormData', 'rootFormData', `return ${code}`)\r\n\r\n    return fn(getPathVal(rootFormData, curNodePath, 1), rootFormData)\r\n  }\r\n  return callBack()\r\n}\r\n\r\nexport function isHiddenWidget(\r\n  uiSchema: UISchema | undefined,\r\n  rootFormData: any,\r\n  curNodePath: string\r\n) {\r\n  const widget = uiSchema?.widget\r\n  const hiddenExpression = uiSchema?.hidden\r\n  return (\r\n    widget === 'HiddenWidget' ||\r\n    !!handleExpression(rootFormData, curNodePath, hiddenExpression, () => {\r\n      if (typeof hiddenExpression === 'function') {\r\n        return hiddenExpression(\r\n          getPathVal(rootFormData, curNodePath, 1),\r\n          rootFormData\r\n        )\r\n      }\r\n      return hiddenExpression\r\n    })\r\n  )\r\n}\r\n\r\nexport function computedCurPath(prePath: string, curKey: string) {\r\n  return prePath === '' ? curKey : [prePath, curKey].join('.')\r\n}\r\n","import {\r\n  PropType,\r\n  computed,\r\n  defineComponent,\r\n  inject,\r\n  provide,\r\n  ComputedRef,\r\n  ref,\r\n  ExtractPropTypes\r\n} from 'vue'\r\nimport { Theme, WidgetName, SchemaPropsDefine } from './types'\r\nimport { isObject } from './utils'\r\nimport { useVJSFContext } from './context'\r\n\r\nexport const THEME_PROVIDER_KEY = Symbol()\r\nexport const ThemeProvider = defineComponent({\r\n  props: {\r\n    theme: {\r\n      type: Object as PropType<Theme>,\r\n      required: true\r\n    }\r\n  },\r\n  setup(props, { slots }) {\r\n    const context = computed(() => props.theme)\r\n\r\n    provide(THEME_PROVIDER_KEY, context)\r\n    return () => {\r\n      const Component = context.value.wrapper?.Form\r\n        ? context.value.wrapper.Form\r\n        : 'div'\r\n      return <Component>{slots.default && slots.default()}</Component>\r\n    }\r\n  }\r\n})\r\n\r\n// TODO: type of argument name\r\nexport function getWidget(\r\n  name: WidgetName,\r\n  props: ExtractPropTypes<typeof SchemaPropsDefine>\r\n) {\r\n  // TODO: 如果 widget 的值是一个字符串呢？\r\n  const formContext = useVJSFContext()\r\n  if (props) {\r\n    const { uiSchema, schema, customFormats } = props\r\n    // 自定义组件有更高优先级\r\n    if (uiSchema?.widget && isObject(uiSchema?.widget)) {\r\n      return ref(uiSchema.widget)\r\n    }\r\n    // 自定义 format 字段\r\n    if (schema.format) {\r\n      if (formContext.formatMapRef.value[schema.format]) {\r\n        return ref(formContext.formatMapRef.value[schema.format])\r\n      }\r\n    }\r\n  }\r\n  const context: ComputedRef<Theme> | undefined = inject(THEME_PROVIDER_KEY)\r\n  if (!context) {\r\n    throw new Error('vjsf theme is required')\r\n  }\r\n  const widgetRef = computed(() => {\r\n    return context.value.widgets[name]\r\n  })\r\n\r\n  return widgetRef\r\n}\r\n","import { computed, defineComponent } from 'vue'\r\nimport { SchemaPropsDefine, WidgetName } from '../types'\r\nimport { getWidget } from '../theme'\r\n\r\nexport default defineComponent({\r\n  name: 'NumberField',\r\n  props: SchemaPropsDefine,\r\n  setup(props) {\r\n    // do something\r\n    const NumberWidgetRef = computed(() => {\r\n      const widgetRef = getWidget(WidgetName.NumberWidget, props)\r\n      return widgetRef.value\r\n    })\r\n    const handleChange = (v: any) => {\r\n      props.onChange(v)\r\n    }\r\n    return () => {\r\n      const { value, schema, errorSchema, isRequired, uiSchema } = props\r\n      const NumberWidget = NumberWidgetRef.value\r\n      return (\r\n        <NumberWidget\r\n          value={value}\r\n          onChange={handleChange}\r\n          schema={schema}\r\n          errors={errorSchema.__errors || []}\r\n          isRequired={isRequired}\r\n          uiSchema={uiSchema || {}}\r\n        ></NumberWidget>\r\n      )\r\n    }\r\n  }\r\n})\r\n","import { computed, defineComponent, mergeProps, PropType } from 'vue'\r\nimport { SchemaPropsDefine, WidgetName } from '../types'\r\nimport { getWidget } from '../theme'\r\nexport default defineComponent({\r\n  name: 'StringField',\r\n  props: SchemaPropsDefine,\r\n  setup(props) {\r\n    // do something\r\n    const TextWidgetRef = computed(() => {\r\n      const widgetRef = getWidget(WidgetName.TextWidget, props)\r\n      return widgetRef.value\r\n    })\r\n\r\n    return () => {\r\n      const { value, schema, errorSchema, isRequired, uiSchema } = props\r\n\r\n      const TextWidget = TextWidgetRef.value\r\n\r\n      return (\r\n        <TextWidget\r\n          value={value}\r\n          onChange={props.onChange}\r\n          schema={schema}\r\n          errors={errorSchema.__errors || []}\r\n          isRequired={isRequired}\r\n          uiSchema={uiSchema || {}}\r\n        ></TextWidget>\r\n      )\r\n    }\r\n  }\r\n})\r\n","import { defineComponent, PropType, inject } from 'vue'\r\nimport { SchemaPropsDefine } from '../types'\r\nimport { useVJSFContext } from '../context'\r\nimport { isObject, computedCurPath } from '../utils'\r\nimport { createUseStyles } from 'vue-jss'\r\n\r\nconst useStyles = createUseStyles({\r\n  schemaTitle: {\r\n    color: '#39828f',\r\n    fontWeight: 600,\r\n    fontSize: 20,\r\n    padding: '7px 0',\r\n    marginBottom: 15\r\n  },\r\n  objTitle: {\r\n    color: '#5f5d5e',\r\n    fontWeight: 600,\r\n    fontSize: 16,\r\n    padding: '7px 0',\r\n    borderBottom: '1px solid #eeeeee',\r\n    marginBottom: 15\r\n  }\r\n})\r\n\r\nexport default defineComponent({\r\n  name: 'ObjectField',\r\n  props: SchemaPropsDefine,\r\n  setup(props) {\r\n    // do something\r\n\r\n    const classesRef = useStyles()\r\n    const context = useVJSFContext()\r\n    const handleObjFieldChange = (k: string, v: any) => {\r\n      const value: any = isObject(props.value) ? props.value : {}\r\n      if (v === undefined) {\r\n        delete value[k]\r\n      } else {\r\n        value[k] = v\r\n      }\r\n      props.onChange(value)\r\n    }\r\n\r\n    return () => {\r\n      const classes = classesRef.value\r\n\r\n      const { SchemaItem } = context\r\n      const {\r\n        schema,\r\n        rootSchema,\r\n        value,\r\n        errorSchema,\r\n        uiSchema,\r\n        curNodePath,\r\n        rootFormData\r\n      } = props\r\n      const properties = schema.properties || {}\r\n\r\n      const required =\r\n        (Array.isArray(schema.required)\r\n          ? schema.required\r\n          : [schema.required]) || []\r\n      const curV: any = isObject(value) ? value : {}\r\n\r\n      return (\r\n        <div>\r\n          <div\r\n            class={\r\n              schema === rootSchema ? classes.schemaTitle : classes.objTitle\r\n            }\r\n          >\r\n            {schema.title || '标题'}\r\n          </div>\r\n\r\n          {Object.keys(properties).map((k: string, index: number) => {\r\n            return (\r\n              <SchemaItem\r\n                schema={properties[k]}\r\n                rootSchema={rootSchema}\r\n                value={curV[k]}\r\n                key={index}\r\n                onChange={(v: any) => handleObjFieldChange(k, v)}\r\n                errorSchema={errorSchema[k] || { k: null }}\r\n                uiSchema={\r\n                  uiSchema?.properties ? uiSchema.properties[k] || {} : {}\r\n                }\r\n                isRequired={required.findIndex((item) => item === k) !== -1}\r\n                curNodePath={computedCurPath(curNodePath as any, k)}\r\n                rootFormData={rootFormData}\r\n              ></SchemaItem>\r\n            )\r\n          })}\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n})\r\n","import { defineComponent, PropType, computed, inject, ComputedRef } from 'vue'\r\nimport {\r\n  Schema,\r\n  SchemaPropsDefine,\r\n  WidgetName,\r\n  Theme,\r\n  SelectWidgetDefine\r\n} from '../types'\r\nimport { useVJSFContext } from '../context'\r\nimport { createUseStyles } from 'vue-jss'\r\nimport { getWidget, THEME_PROVIDER_KEY } from '../theme'\r\nconst useStyles = createUseStyles({\r\n  actions: {\r\n    background: '#F9F9F9',\r\n    padding: 5,\r\n    textAlign: 'right'\r\n  },\r\n  action: {\r\n    color: '#ffffff',\r\n    backgroundColor: '#39828f',\r\n    '&:hover': {\r\n      backgroundColor: '#619ba5',\r\n      color: '#ffffff'\r\n    },\r\n    '& + &': {\r\n      marignRight: 10\r\n    }\r\n  },\r\n  content: {\r\n    padding: 10\r\n  }\r\n})\r\n\r\nconst ArrayItemWrapper = defineComponent({\r\n  name: 'ArrayItemWrapper',\r\n  props: {\r\n    onAdd: {\r\n      type: Function as PropType<(index: number) => void>,\r\n      required: true\r\n    },\r\n    onDelete: {\r\n      type: Function as PropType<(index: number) => void>,\r\n      required: true\r\n    },\r\n    onUp: {\r\n      type: Function as PropType<(index: number) => void>,\r\n      required: true\r\n    },\r\n    onDown: {\r\n      type: Function as PropType<(index: number) => void>,\r\n      required: true\r\n    },\r\n    index: {\r\n      type: Number,\r\n      required: true\r\n    }\r\n  },\r\n  setup(props, { slots }) {\r\n    const classesRef = useStyles()\r\n\r\n    // custom  BtnWrapper\r\n    const context: ComputedRef<Theme> | undefined = inject(THEME_PROVIDER_KEY)\r\n    if (!context) {\r\n      throw new Error('vjsf theme is required')\r\n    }\r\n    const BtnComponentRef = computed(() => {\r\n      return context.value.wrapper?.Btn ? context.value.wrapper?.Btn : 'button'\r\n    })\r\n    const sizeRef = computed(() => {\r\n      return context.value.wrapper?.Btn ? 'small' : ''\r\n    })\r\n\r\n    return () => {\r\n      const classes = classesRef.value\r\n      const BtnComponent = BtnComponentRef.value\r\n      const size = sizeRef.value\r\n      const handleAdd = () => {\r\n        props.onAdd(props.index)\r\n      }\r\n      const handleDelete = () => {\r\n        props.onDelete(props.index)\r\n      }\r\n      const handleUp = () => {\r\n        props.onUp(props.index)\r\n      }\r\n      const handleDown = () => {\r\n        props.onDown(props.index)\r\n      }\r\n      return (\r\n        <div class=\"arrayItem\">\r\n          <div class={classes.content}>{slots.default && slots.default()}</div>\r\n          <div class={classes.actions}>\r\n            <BtnComponent\r\n              class={['addBtn', classes.action]}\r\n              size={size}\r\n              onClick={handleAdd}\r\n            >\r\n              新增\r\n            </BtnComponent>\r\n            <BtnComponent\r\n              class={['deleteBtn', classes.action]}\r\n              size={size}\r\n              onClick={handleDelete}\r\n            >\r\n              删除\r\n            </BtnComponent>\r\n            <BtnComponent\r\n              class={['downBtn', classes.action]}\r\n              size={size}\r\n              onClick={handleDown}\r\n            >\r\n              下移\r\n            </BtnComponent>\r\n            <BtnComponent\r\n              class={['upBtn', classes.action]}\r\n              size={size}\r\n              onClick={handleUp}\r\n            >\r\n              上移\r\n            </BtnComponent>\r\n          </div>\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n})\r\n\r\nexport default defineComponent({\r\n  name: 'ArrayField',\r\n  props: SchemaPropsDefine,\r\n  setup(props) {\r\n    // do something\r\n    const context = useVJSFContext()\r\n\r\n    const hanldeArrayItemChange = (v: any, index: number | undefined) => {\r\n      const { value } = props\r\n      let valueArr\r\n      if (index) {\r\n        valueArr = Array.isArray(value) ? value : [value]\r\n        valueArr[index] = v\r\n      } else {\r\n        valueArr = Array.isArray(v) ? v : [v]\r\n      }\r\n      props.onChange(valueArr)\r\n    }\r\n\r\n    // edit singleTypeArray\r\n    const handleAdd = (index: number) => {\r\n      const { value } = props\r\n      const valueArr = Array.isArray(value) ? value : []\r\n      valueArr.splice(index + 1, 0, undefined)\r\n      props.onChange(valueArr)\r\n    }\r\n\r\n    const handleDelete = (index: number) => {\r\n      const { value } = props\r\n      const valueArr = Array.isArray(value) ? value : []\r\n      valueArr.splice(index, 1)\r\n      props.onChange(valueArr)\r\n    }\r\n\r\n    const handleUp = (index: number) => {\r\n      if (index === 0) return\r\n      const { value } = props\r\n      const valueArr = Array.isArray(value) ? value : []\r\n      const cur = valueArr.splice(index, 1)\r\n      valueArr.splice(index - 1, 0, cur[0])\r\n      props.onChange(valueArr)\r\n    }\r\n\r\n    const handleDown = (index: number) => {\r\n      const { value } = props\r\n      const valueArr = Array.isArray(value) ? value : []\r\n      if (index === valueArr.length - 1) return\r\n      const cur = valueArr.splice(index, 1)\r\n      valueArr.splice(index + 1, 0, cur[0])\r\n      props.onChange(valueArr)\r\n    }\r\n\r\n    const SelectWidgetRef = getWidget(WidgetName.SelectWidget, props)\r\n    const RadioWidgetRef = getWidget(WidgetName.RadioWidget, props)\r\n    const CheckboxWidgetRef = getWidget(WidgetName.CheckboxWidget, props)\r\n\r\n    return () => {\r\n      const { schema, rootSchema, value, errorSchema, uiSchema } = props\r\n\r\n      const SchemaItem = context.SchemaItem\r\n      const SelectWidget = SelectWidgetRef.value\r\n      const RadioWidget = RadioWidgetRef.value\r\n      const CheckboxWidget = CheckboxWidgetRef.value\r\n      const isMultiType = Array.isArray(schema.items)\r\n      const isSelect = schema.items && (schema.items as any).enum\r\n      const itemArr: Schema[] = schema.items as any\r\n      const valueArr = Array.isArray(value) ? value : []\r\n      // multitype array\r\n      if (isMultiType) {\r\n        return itemArr.map((item: Schema, index: number) => {\r\n          const itemsUISchema = uiSchema?.items\r\n          const itemUISchema = Array.isArray(itemsUISchema)\r\n            ? itemsUISchema[index] || {}\r\n            : itemsUISchema || {}\r\n          return (\r\n            <SchemaItem\r\n              {...props}\r\n              schema={item}\r\n              rootSchema={rootSchema}\r\n              value={valueArr[index]}\r\n              key={index}\r\n              errorSchema={errorSchema[index] || {}}\r\n              onChange={(v: any) => {\r\n                hanldeArrayItemChange(v, index)\r\n              }}\r\n              uiSchema={itemUISchema}\r\n            ></SchemaItem>\r\n          )\r\n        })\r\n        //singletype array without enumerable items\r\n      } else if (!isSelect) {\r\n        const valueArr = Array.isArray(value) ? value : []\r\n\r\n        return valueArr.map((v: any, index: number) => (\r\n          <ArrayItemWrapper\r\n            index={index}\r\n            onAdd={handleAdd}\r\n            onDelete={handleDelete}\r\n            onUp={handleUp}\r\n            onDown={handleDown}\r\n          >\r\n            <SchemaItem\r\n              {...props}\r\n              schema={schema.items as Schema}\r\n              rootSchema={rootSchema}\r\n              value={v}\r\n              key={index}\r\n              errorSchema={errorSchema[index] || {}}\r\n              onChange={(v: any) => {\r\n                hanldeArrayItemChange(v, index)\r\n              }}\r\n              uiSchema={uiSchema?.items || {}}\r\n            ></SchemaItem>\r\n          </ArrayItemWrapper>\r\n        ))\r\n        //  singletype array with enumerable items\r\n      } else {\r\n        const enumArr = (schema as any).items.enum\r\n        const selectOpts: Array<{ value: string; label: any }> = enumArr.map(\r\n          (i: any) => ({ value: i, label: i })\r\n        )\r\n\r\n        const Component: SelectWidgetDefine =\r\n          valueArr.length > 1\r\n            ? (CheckboxWidget as SelectWidgetDefine)\r\n            : enumArr.length <= 4\r\n            ? (RadioWidget as SelectWidgetDefine)\r\n            : (SelectWidget as SelectWidgetDefine)\r\n\r\n        return (\r\n          <div>\r\n            {selectOpts && (\r\n              <Component\r\n                value={valueArr}\r\n                schema={schema}\r\n                onChange={(v: any, index: number | undefined) => {\r\n                  hanldeArrayItemChange(v, index)\r\n                }}\r\n                errors={errorSchema.__errors || []}\r\n                options={selectOpts || []}\r\n                uiSchema={uiSchema}\r\n              ></Component>\r\n            )}\r\n          </div>\r\n        )\r\n      }\r\n    }\r\n  }\r\n})\r\n","import { computed, defineComponent } from 'vue'\r\nimport { SchemaPropsDefine, WidgetName } from '../types'\r\nimport { getWidget } from '../theme'\r\n\r\nexport default defineComponent({\r\n  name: 'IntegerField',\r\n  props: SchemaPropsDefine,\r\n  setup(props) {\r\n    // do something\r\n    const IntegerWidgetRef = computed(() => {\r\n      const widgetRef = getWidget(WidgetName.IntegerWidget, props)\r\n      return widgetRef.value\r\n    })\r\n    const handleChange = (v: any) => {\r\n      props.onChange(v)\r\n    }\r\n    return () => {\r\n      const { value, schema, errorSchema, isRequired, uiSchema } = props\r\n      const IntegerWidget = IntegerWidgetRef.value\r\n      return (\r\n        <IntegerWidget\r\n          value={value}\r\n          onChange={handleChange}\r\n          schema={schema}\r\n          errors={errorSchema.__errors || []}\r\n          isRequired={isRequired}\r\n          uiSchema={uiSchema || {}}\r\n        ></IntegerWidget>\r\n      )\r\n    }\r\n  }\r\n})\r\n","import { computed, defineComponent } from 'vue'\r\nimport { SchemaPropsDefine, WidgetName } from '../types'\r\nimport { getWidget } from '../theme'\r\nexport default defineComponent({\r\n  name: 'BooleanField',\r\n  props: SchemaPropsDefine,\r\n  setup(props) {\r\n    // do something\r\n    const BooleanWidgetRef = computed(() => {\r\n      const widgetRef = getWidget(WidgetName.BooleanWidget, props)\r\n      return widgetRef.value\r\n    })\r\n    return () => {\r\n      const { value, schema, onChange, errorSchema, isRequired, uiSchema } =\r\n        props\r\n      const BooleanWidget = BooleanWidgetRef.value\r\n      return (\r\n        <BooleanWidget\r\n          value={value}\r\n          onChange={onChange}\r\n          schema={schema}\r\n          errors={errorSchema.__errors || []}\r\n          isRequired={isRequired}\r\n          uiSchema={uiSchema || {}}\r\n        ></BooleanWidget>\r\n      )\r\n    }\r\n  }\r\n})\r\n","import {\r\n  defineComponent,\r\n  PropType,\r\n  ref,\r\n  computed,\r\n  Ref,\r\n  ComputedRef,\r\n  watchEffect\r\n} from 'vue'\r\nimport { MultiSchemaPropsDefine, WidgetName } from '../types'\r\nimport { getMatchingOption } from '../utils'\r\nimport { getWidget } from '../theme'\r\nimport { useVJSFContext } from '../context'\r\nexport default defineComponent({\r\n  name: 'MultiSchemaField',\r\n  props: MultiSchemaPropsDefine,\r\n  setup(props) {\r\n    // TODO: 不确定要不要封装函数 getMatchingOpt\r\n    // 传入oneOf 数组作为 options，根据 value 去 match 结构相同的 option，得到索引号变量 selectedOption\r\n    const options = props.options || []\r\n    const selectedOptRef = ref(0)\r\n    watchEffect(() => {\r\n      const option = getMatchingOption(props.value, options)\r\n      if (option !== 0) {\r\n        selectedOptRef.value = option\r\n      } else {\r\n        selectedOptRef.value = selectedOptRef.value ? selectedOptRef.value : 0\r\n      }\r\n    })\r\n\r\n    // TODO: 根据 selectedOptRef.value 这个索引号获取真正的 option, 检查这个schema中是否有 type，若没有，初始化一个type属性\r\n    const selectedSchemaRef = computed(() => {\r\n      const option = options[selectedOptRef.value] || null\r\n      if (option) {\r\n        return option.type\r\n          ? option\r\n          : Object.assign({}, option, { type: 'object' })\r\n      }\r\n      return {}\r\n    })\r\n\r\n    // 获取 uiSchema 中的options，看是否有自定义 widget，如果没有就使用默认的 selectWidget\r\n    const MultiSchemaRef = computed(() => {\r\n      const widgetRef = getWidget(WidgetName.SelectWidget, props)\r\n      return widgetRef.value\r\n    })\r\n\r\n    // TODO: enumOptions变量，整理 selectWidget 所需要的数据\r\n    const enumOptions = options.map((opt, index) => ({\r\n      label: opt.title || `Option ${index + 1}`,\r\n      value: index\r\n    }))\r\n\r\n    const context = useVJSFContext()\r\n    const onSelectChange = (v: any) => {\r\n      selectedOptRef.value = v\r\n    }\r\n    return () => {\r\n      const { value, schema, errorSchema, isRequired, rootSchema, uiSchema } =\r\n        props\r\n\r\n      const { SchemaItem } = context\r\n      const selectedOption = selectedOptRef.value\r\n\r\n      const selectedSchema = selectedSchemaRef.value\r\n      const MultiSchemaWidget = MultiSchemaRef.value\r\n      return (\r\n        <div>\r\n          <MultiSchemaWidget\r\n            value={selectedOption}\r\n            onChange={onSelectChange}\r\n            schema={schema}\r\n            errors={errorSchema.__errors || []}\r\n            isRequired={isRequired}\r\n            options={enumOptions}\r\n            uiSchema={uiSchema || {}}\r\n          ></MultiSchemaWidget>\r\n          {selectedOption !== null && (\r\n            <SchemaItem\r\n              {...props}\r\n              schema={selectedSchema}\r\n              rootSchema={rootSchema}\r\n              value={value}\r\n            ></SchemaItem>\r\n          )}\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n})\r\n","import { computed, defineComponent, PropType } from 'vue'\r\n\r\nimport { Schema, SchemaTypes, SchemaPropsDefine } from './types'\r\n\r\nimport { retrieveSchema, isHiddenWidget } from './utils'\r\nimport NumberField from './fields/NumberField'\r\nimport StringField from './fields/StringField'\r\nimport ObjectField from './fields/ObjectField'\r\nimport ArrayField from './fields/ArrayField'\r\nimport IntegerField from './fields/IntegerField'\r\nimport BooleanField from './fields/BooleanField'\r\nimport { ErrorSchema } from './validator'\r\nimport { useVJSFContext } from './context'\r\nimport MultiSchemaField from './fields/MultiSchemaField'\r\nimport { createUseStyles } from 'vue-jss'\r\n\r\nconst useStyles = createUseStyles({\r\n  hidden: {\r\n    display: 'none'\r\n  }\r\n})\r\nexport default defineComponent({\r\n  name: 'SchemaItem',\r\n  props: SchemaPropsDefine,\r\n\r\n  setup(props) {\r\n    // const formContext = useVJSFContext()\r\n    const retrievedSchemaRef = computed(() => {\r\n      const { schema, rootSchema, value } = props\r\n      // 在添加customKeyword 后更新schema\r\n      // return formContext.updateSchemaRef.value(\r\n      //   retrieveSchema(schema, rootSchema, value)\r\n      // )\r\n      console.log(retrieveSchema(schema, rootSchema, value))\r\n\r\n      return retrieveSchema(schema, rootSchema, value)\r\n    })\r\n    const handleChange = (v: any) => {\r\n      props.onChange(v)\r\n    }\r\n\r\n    // 检验是否需要隐藏\r\n\r\n    const isHiddenRef = computed(() => {\r\n      return isHiddenWidget(\r\n        props.uiSchema,\r\n        props.rootFormData,\r\n        props.curNodePath as string\r\n      )\r\n    })\r\n    const classesRef = useStyles()\r\n    return () => {\r\n      const classes = classesRef.value\r\n      const isHidden = isHiddenRef.value\r\n\r\n      const {\r\n        value,\r\n        errorSchema,\r\n        uiSchema,\r\n        isRequired,\r\n        rootFormData,\r\n        rootSchema\r\n      } = props\r\n      const retrievedSchema = retrievedSchemaRef.value\r\n      console.log(retrievedSchema)\r\n\r\n      const type = retrievedSchema.type\r\n      let Component: any\r\n      let options: any\r\n      if (retrievedSchema.oneOf || retrievedSchema.anyOf) {\r\n        Component = MultiSchemaField\r\n        options = retrievedSchema.oneOf || retrievedSchema.anyOf || undefined\r\n      } else {\r\n        switch (type) {\r\n          case SchemaTypes.STRING:\r\n            Component = StringField\r\n            break\r\n          case SchemaTypes.NUMBER:\r\n            Component = NumberField\r\n            break\r\n          case SchemaTypes.OBJECT:\r\n            Component = ObjectField\r\n            break\r\n          case SchemaTypes.ARRAY:\r\n            Component = ArrayField\r\n            break\r\n          case SchemaTypes.INTEGER:\r\n            Component = IntegerField\r\n            break\r\n          case SchemaTypes.BOOLEAN:\r\n            Component = BooleanField\r\n            break\r\n          default:\r\n            console.warn(`${type} is not supported`)\r\n        }\r\n      }\r\n\r\n      return (\r\n        <Component\r\n          class={isHidden ? classes.hidden : ''}\r\n          value={value}\r\n          schema={retrievedSchema}\r\n          options={options}\r\n          onChange={handleChange}\r\n          uiSchema={uiSchema || {}}\r\n          errorSchema={errorSchema || {}}\r\n          isRequired={isRequired}\r\n          rootSchema={rootSchema}\r\n          rootFormData={rootFormData}\r\n        ></Component>\r\n      )\r\n    }\r\n  }\r\n})\r\n","import Ajv, { ErrorObject } from 'ajv/dist/2020'\r\nimport i18n from 'ajv-i18n'\r\nimport { Schema } from './types'\r\nimport toPath from 'lodash.topath'\r\nimport { isObject } from './utils'\r\ninterface FormattedErrObj {\r\n  name: string\r\n  property: string\r\n  message: string | undefined\r\n  params: any\r\n  schemaPath: string\r\n}\r\n\r\nexport type ErrorSchema = {\r\n  [level: string]: ErrorSchema\r\n} & {\r\n  __errors?: string[]\r\n}\r\n\r\nfunction formatErrorList(error: ErrorObject[] | undefined | null) {\r\n  if (error === null || error === undefined) return []\r\n\r\n  return error.map(({ keyword, instancePath, schemaPath, params, message }) => {\r\n    return {\r\n      name: keyword,\r\n      property: `${instancePath}`,\r\n      schemaPath,\r\n      params,\r\n      message\r\n    }\r\n  })\r\n}\r\n\r\nfunction formatErrSchema(errors: FormattedErrObj[]) {\r\n  if (errors.length < 1 || errors === undefined) return {}\r\n\r\n  return errors.reduce((errSchema, curV) => {\r\n    const { property, message } = curV\r\n    let parent = errSchema\r\n    const path = property.split('/')\r\n\r\n    // const path = toPath(property)\r\n\r\n    if (path.length > 0 && path[0] === '') {\r\n      path.splice(0, 1)\r\n    }\r\n\r\n    for (const segment of path) {\r\n      if (!(segment in parent)) {\r\n        ;(parent as any)[segment] = {}\r\n      }\r\n      parent = parent[segment]\r\n    }\r\n\r\n    if (Array.isArray(parent.__errors)) {\r\n      parent.__errors = parent.__errors.concat(message || '')\r\n    } else {\r\n      if (message) {\r\n        parent.__errors = [message]\r\n      }\r\n    }\r\n\r\n    return errSchema\r\n  }, {} as ErrorSchema)\r\n}\r\n\r\nexport async function validateFormData(\r\n  validator: Ajv,\r\n  formData: any,\r\n  schema: Schema,\r\n  locale: keyof typeof i18n,\r\n  customValidate: ((data: any, errors: any) => void) | undefined\r\n) {\r\n  let validatorErr = null\r\n  try {\r\n    validator.validate(schema, formData)\r\n  } catch (error) {\r\n    validatorErr = error as any\r\n  }\r\n  i18n[locale](validator.errors)\r\n\r\n  const errors = formatErrorList(validator.errors)\r\n\r\n  if (validatorErr) {\r\n    // TODO: 如果只有 validator 错误，应该如何展示？\r\n    if (!errors.length) {\r\n      const validatorErrMsg = validatorErr.message\r\n      return {\r\n        errors: { message: validatorErrMsg },\r\n        errorSchema: { __errors: { message: validatorErrMsg } },\r\n        valid: undefined\r\n      }\r\n    }\r\n    errors.push({ message: validatorErr.message } as FormattedErrObj)\r\n  }\r\n\r\n  const errorSchema = formatErrSchema(errors)\r\n\r\n  if (!customValidate) {\r\n    return {\r\n      errors,\r\n      errorSchema,\r\n      valid: errors.length === 0\r\n    }\r\n  }\r\n  const proxy = createErrorProxy()\r\n\r\n  await customValidate(formData, proxy)\r\n\r\n  const newErrorSchema = mergeObjs(errorSchema, proxy, false)\r\n\r\n  return {\r\n    errors,\r\n    errorSchema: newErrorSchema,\r\n    valid: errors.length === 0\r\n  }\r\n}\r\n\r\nfunction createErrorProxy() {\r\n  const raw = {}\r\n  return new Proxy(raw, {\r\n    get(target, key, receiver) {\r\n      if (key === 'addErr') {\r\n        return (msg: string) => {\r\n          const __errors = Reflect.get(target, '__errors', receiver)\r\n          if (__errors && Array.isArray(__errors)) {\r\n            __errors.push(msg)\r\n          } else {\r\n            ;(target as any).__errors = [msg]\r\n          }\r\n        }\r\n      }\r\n      const targetObj = Reflect.get(target, key, receiver)\r\n      if (targetObj === undefined) {\r\n        const p: any = createErrorProxy()\r\n        ;(target as any)[key] = p\r\n        return p\r\n      }\r\n      return targetObj\r\n    }\r\n  })\r\n}\r\n\r\nfunction mergeObjs(obj1: any, obj2: any, concatArr = false) {\r\n  const accumulator = Object.assign({}, obj1) // Prevent mutation of source object\r\n  return Object.keys(obj2).reduce((accumulator, key) => {\r\n    const left = obj1 ? obj1[key] : {}\r\n    const right = obj2[key]\r\n    if (obj1 && obj1.hasOwnProperty(key) && isObject(right)) {\r\n      accumulator[key] = mergeObjs(left, right, concatArr) // 递归\r\n    } else if (concatArr && Array.isArray(left) && Array.isArray(right)) {\r\n      accumulator[key] = left.concat(right)\r\n    } else {\r\n      accumulator[key] = right\r\n    }\r\n    return accumulator\r\n  }, accumulator)\r\n}\r\n","import {\r\n  defineComponent,\r\n  PropType,\r\n  provide,\r\n  Ref,\r\n  ref,\r\n  shallowRef,\r\n  watch,\r\n  watchEffect,\r\n  computed\r\n} from 'vue'\r\nimport {\r\n  Schema,\r\n  UISchema,\r\n  ContextRef,\r\n  CustomFormat,\r\n  CommonWidgetDefine,\r\n  CustomKeyword\r\n} from './types'\r\nimport { SchemaFormContextKey } from './context'\r\nimport SchemaItem from './SchemaItem'\r\nimport Ajv from 'ajv/dist/2020'\r\nimport { Options } from 'ajv'\r\nimport { validateFormData, ErrorSchema } from './validator'\r\nimport i18n from 'ajv-i18n'\r\nexport default defineComponent({\r\n  name: 'SchemaForm',\r\n  props: {\r\n    schema: {\r\n      type: Object as PropType<Schema>,\r\n      required: true\r\n    },\r\n    value: {\r\n      required: true\r\n    },\r\n    onChange: {\r\n      type: Function as PropType<(...v: any[]) => void>,\r\n      required: true\r\n    },\r\n    contextRef: {\r\n      type: Object as PropType<Ref<ContextRef | undefined>>\r\n    },\r\n    ajvOpts: {\r\n      type: Object as PropType<Options>\r\n    },\r\n    locale: {\r\n      type: String,\r\n      default: 'zh'\r\n    },\r\n    customValidate: {\r\n      type: Function as PropType<((data: any, errors: any) => void) | undefined>\r\n    },\r\n    uiSchema: {\r\n      type: Object as PropType<UISchema>\r\n    },\r\n    customFormats: {\r\n      type: [Array, Object] as PropType<CustomFormat[] | CustomFormat>\r\n    },\r\n    customKeyword: {\r\n      type: [Array, Object] as PropType<CustomKeyword[] | CustomKeyword>\r\n    },\r\n    rootFormData: {\r\n      default: {}\r\n    },\r\n    curNodePath: {\r\n      default: ''\r\n    }\r\n  },\r\n  setup(props) {\r\n    const handleChange = (v: any) => {\r\n      props.onChange(v)\r\n    }\r\n\r\n    //customFormatMap: name-component\r\n    const formatMapRef = computed(() => {\r\n      if (props.customFormats) {\r\n        const customFormats = Array.isArray(props.customFormats)\r\n          ? props.customFormats\r\n          : [props.customFormats]\r\n        return customFormats.reduce((result, format) => {\r\n          result[format.name] = format.component\r\n          return result\r\n        }, {} as { [key: string]: CommonWidgetDefine })\r\n      } else {\r\n        return {}\r\n      }\r\n    })\r\n\r\n    // customKeyword method\r\n    // const updateSchemaRef = computed(() => {\r\n    //   if (props.customKeyword) {\r\n    //     const customKeywords = Array.isArray(props.customKeyword)\r\n    //       ? props.customKeyword\r\n    //       : [props.customKeyword]\r\n    //     return (schema: Schema) => {\r\n    //       let newSchema = schema\r\n    //       customKeywords.forEach((keyword) => {\r\n    //         if ((newSchema as any)[keyword.keyword as string]) {\r\n    //           newSchema = keyword.updateSchema(schema)\r\n    //         }\r\n    //       })\r\n    //       return newSchema\r\n    //     }\r\n    //   } else {\r\n    //     return (s: Schema) => s\r\n    //   }\r\n    // })\r\n\r\n    const context: any = {\r\n      SchemaItem,\r\n      formatMapRef\r\n      // updateSchemaRef\r\n    }\r\n    provide(SchemaFormContextKey, context)\r\n\r\n    // ajv validator instance\r\n    const defaultAjvOpts = { allErrors: true }\r\n    const validatorRef: Ref<Ajv> = shallowRef() as any\r\n    const errorSchemaRef: Ref<ErrorSchema> = shallowRef({})\r\n\r\n    watchEffect(() => {\r\n      validatorRef.value = new Ajv({\r\n        ...defaultAjvOpts,\r\n        ...props.ajvOpts\r\n      })\r\n\r\n      // add custom format on ajv instance\r\n      if (props.customFormats) {\r\n        const customFormats = Array.isArray(props.customFormats)\r\n          ? props.customFormats\r\n          : [props.customFormats]\r\n\r\n        customFormats.forEach((format) => {\r\n          validatorRef.value.addFormat(format.name, format.definition)\r\n        })\r\n      }\r\n      // add custom keyword on ajv instance\r\n      if (props.customKeyword) {\r\n        const customKeywords = Array.isArray(props.customKeyword)\r\n          ? props.customKeyword\r\n          : [props.customKeyword]\r\n        customKeywords.forEach((keyword) => {\r\n          validatorRef.value.addKeyword(keyword)\r\n        })\r\n      }\r\n    })\r\n\r\n    const validateResolveRef = ref()\r\n    const validateIndex = ref(0)\r\n\r\n    async function newValidate() {\r\n      console.log('<--------- start validate -------->')\r\n      const index = (validateIndex.value += 1)\r\n      const res = await validateFormData(\r\n        validatorRef.value,\r\n        props.value,\r\n        props.schema,\r\n        props.locale as keyof typeof i18n,\r\n        props.customValidate\r\n      )\r\n      if (index !== validateIndex.value) return\r\n      console.log('<--------- end validate -------->')\r\n\r\n      errorSchemaRef.value = res.errorSchema\r\n\r\n      validateResolveRef.value(res)\r\n      validateResolveRef.value = undefined\r\n    }\r\n\r\n    watch(\r\n      () => {\r\n        props.contextRef\r\n      },\r\n      () => {\r\n        if (props.contextRef) {\r\n          props.contextRef.value = {\r\n            doValidate() {\r\n              return new Promise((resolve) => {\r\n                validateResolveRef.value = resolve\r\n                newValidate()\r\n              })\r\n            }\r\n          }\r\n        }\r\n      },\r\n      {\r\n        immediate: true\r\n      }\r\n    )\r\n\r\n    watch(\r\n      () => props.value,\r\n      () => {\r\n        if (validateResolveRef.value) {\r\n          newValidate()\r\n        }\r\n      },\r\n      { deep: true }\r\n    )\r\n\r\n    return () => {\r\n      const { schema, value, uiSchema, rootFormData, curNodePath } = props\r\n      const errorSchema = errorSchemaRef.value\r\n\r\n      return (\r\n        <SchemaItem\r\n          schema={schema}\r\n          rootSchema={schema}\r\n          value={value}\r\n          onChange={handleChange}\r\n          errorSchema={errorSchema}\r\n          uiSchema={uiSchema || {}}\r\n          rootFormData={rootFormData}\r\n          curNodePath={curNodePath}\r\n        />\r\n      )\r\n    }\r\n  }\r\n})\r\n","export default {\r\n  name: 'Simple',\r\n  schema: {\r\n    description: '简单数据样例',\r\n    title: '个人资料',\r\n    type: 'object',\r\n    required: ['name', 'mobile'],\r\n    properties: {\r\n      name: {\r\n        type: 'string',\r\n        title: '昵称',\r\n        default: '小李'\r\n      },\r\n      age: {\r\n        type: 'number',\r\n        title: '年龄'\r\n      },\r\n      mobile: {\r\n        type: 'string',\r\n        minLength: 11,\r\n        title: '手机号码'\r\n      },\r\n      city: {\r\n        type: 'string',\r\n        title: '现居地'\r\n      },\r\n      defaultAddress: {\r\n        type: 'boolean',\r\n        title: '设为默认地址',\r\n        default: true\r\n      }\r\n    }\r\n  },\r\n  uiSchema: {},\r\n  default: {\r\n    name: '小张',\r\n    age: '33',\r\n    mobile: '13122863836',\r\n    city: '深圳',\r\n    defaultAddress: false\r\n  }\r\n}\r\n","export default {\r\n  name: 'Nested',\r\n  schema: {\r\n    description: '嵌套数据',\r\n    title: '用户信息',\r\n    type: 'object',\r\n    properties: {\r\n      name: {\r\n        type: 'object',\r\n        required: ['firstName', 'lastName'],\r\n        title: '申请人姓名',\r\n        properties: {\r\n          firstName: {\r\n            type: 'string',\r\n            minLength: 1,\r\n            title: '姓'\r\n          },\r\n          lastName: {\r\n            type: 'string',\r\n            minLength: 1,\r\n            title: '名',\r\n            default: 'Last'\r\n          }\r\n        },\r\n        errorMessage: {\r\n          firstName: '至少有个字符吧'\r\n        }\r\n      },\r\n      contactInfo: {\r\n        type: 'object',\r\n        title: '联系方式',\r\n        required: ['phone', 'email'],\r\n        properties: {\r\n          phone: {\r\n            type: 'string',\r\n            description: '不少于11位',\r\n            minLength: 11,\r\n            title: '手机号码'\r\n          },\r\n          email: {\r\n            type: 'string',\r\n            title: '邮箱'\r\n          }\r\n        }\r\n      }\r\n    },\r\n    errorMessage: '这是一个简单的错误'\r\n  },\r\n  uiSchema: {},\r\n  default: {\r\n    name: {\r\n      firstName: '李',\r\n      lastName: '四'\r\n    },\r\n    contactInfo: {\r\n      phone: '13121556960',\r\n      email: 'lisi0908@gmail.com'\r\n    }\r\n  }\r\n}\r\n","export default {\r\n  name: 'Arrays',\r\n  schema: {\r\n    description: '常用的数组类型数据校验Schema',\r\n    type: 'object',\r\n    title: '数组',\r\n    properties: {\r\n      name: {\r\n        type: 'string',\r\n        minLength: 1,\r\n        title: '用户名',\r\n        default: 'user001'\r\n      },\r\n      interest: {\r\n        type: 'array',\r\n        title: '感兴趣的领域',\r\n        items: {\r\n          type: 'string',\r\n          enum: ['金融', '体育', '社会', '影视', '文化', '生活方式']\r\n        }\r\n      }\r\n    }\r\n  },\r\n  uiSchema: {},\r\n  default: {\r\n    name: 'maze',\r\n    interest: ['社会', '体育']\r\n  }\r\n}\r\n","import { defineComponent } from 'vue'\r\nimport { createUseStyles } from 'vue-jss'\r\nimport { CommonWidgetPropsDefine } from '../types'\r\nconst useStyles = createUseStyles({\r\n  errorText: {\r\n    color: 'red',\r\n    fontSize: 12,\r\n    margin: '2px 0  5px'\r\n  },\r\n  list: {\r\n    listStyleType: 'none',\r\n    padding: 0,\r\n    margin: '0 0 15px 0'\r\n  },\r\n  content: {\r\n    padding: '5px 0'\r\n  }\r\n})\r\nexport function createFormItem(Widget: any) {\r\n  const FormItem = defineComponent({\r\n    name: 'FormItem',\r\n    props: CommonWidgetPropsDefine,\r\n    setup(props, { slots }) {\r\n      const classesRef = useStyles()\r\n      return () => {\r\n        const { schema, errors, isRequired } = props\r\n\r\n        const classes = classesRef.value\r\n        return (\r\n          <div>\r\n            <el-form-item label={schema.title} required={isRequired}>\r\n              <div class={classes.content}>\r\n                {slots.default && slots.default()}\r\n              </div>\r\n            </el-form-item>\r\n            <ul class={classes.list}>\r\n              {errors?.map((err: any) => (\r\n                <li class={classes.errorText}>{err}</li>\r\n              ))}\r\n            </ul>\r\n          </div>\r\n        )\r\n      }\r\n    }\r\n  })\r\n  return defineComponent({\r\n    name: `Wrapped${Widget.name}`,\r\n    props: CommonWidgetPropsDefine,\r\n    setup(props, { attrs }) {\r\n      return () => {\r\n        return (\r\n          <FormItem {...props}>\r\n            <Widget {...props} {...attrs}></Widget>\r\n          </FormItem>\r\n        )\r\n      }\r\n    }\r\n  }) as any\r\n}\r\n","import { defineComponent, ref, watch } from 'vue'\r\nimport { CommonWidgetPropsDefine } from '../lib/types'\r\nimport { createFormItem } from '../lib/theme-default/FormItem'\r\n\r\nexport default createFormItem(\r\n  defineComponent({\r\n    name: 'SliderWidget',\r\n    props: CommonWidgetPropsDefine,\r\n    setup(props) {\r\n      // do something\r\n      const curValRef = ref(props.value || 0)\r\n\r\n      watch(curValRef, (newV: any, oldV: any) => {\r\n        if (oldV !== newV) {\r\n          props.onChange(newV)\r\n        }\r\n      })\r\n      watch(\r\n        () => {\r\n          props.value\r\n        },\r\n        (val: any) => {\r\n          if (val !== curValRef.value) {\r\n            curValRef.value = val\r\n          }\r\n        }\r\n      )\r\n\r\n      return () => {\r\n        const min = props.schema.minimum\r\n        const max = props.schema.maximum\r\n        const step = props.schema.multipleOf\r\n        return (\r\n          <el-slider\r\n            min={min || 0}\r\n            max={max || 100}\r\n            v-model={curValRef.value}\r\n            step={step || 1}\r\n          ></el-slider>\r\n        )\r\n      }\r\n    }\r\n  })\r\n)\r\n","import SliderWidget from './SliderWidget'\r\nexport default {\r\n  name: 'Number',\r\n  schema: {\r\n    description: '数字类型数据样例',\r\n    title: '统计',\r\n    type: 'object',\r\n    required: ['rating', 'age'],\r\n    properties: {\r\n      rating: {\r\n        type: 'number',\r\n        title: '评分',\r\n        default: 0\r\n      },\r\n      age: {\r\n        type: 'integer',\r\n        title: '年龄',\r\n        default: 20\r\n      },\r\n      service: {\r\n        type: 'integer',\r\n        title: '服务满意度',\r\n        maximum: 100,\r\n        minimum: 0\r\n      },\r\n      delivery: {\r\n        type: 'integer',\r\n        title: '配送满意度',\r\n        maximum: 100,\r\n        minimum: 0,\r\n        multipleOf: 10\r\n      }\r\n    }\r\n  },\r\n  uiSchema: {\r\n    properties: {\r\n      service: {\r\n        widget: SliderWidget\r\n      },\r\n      delivery: {\r\n        widget: SliderWidget\r\n      }\r\n    }\r\n  },\r\n  default: {\r\n    rating: 85.6,\r\n    age: 20,\r\n    service: 50,\r\n    delivery: 60\r\n  }\r\n}\r\n","export default {\r\n  name: 'References',\r\n  schema: {\r\n    description: 'Schema 引用与递归调用',\r\n    title: '商品订单',\r\n    definitions: {\r\n      address: {\r\n        type: 'object',\r\n        required: ['street', 'city', 'state'],\r\n        properties: {\r\n          street: {\r\n            type: 'string',\r\n            title: '街道'\r\n          },\r\n          city: {\r\n            type: 'string',\r\n            title: '城市'\r\n          },\r\n          province: {\r\n            type: 'string',\r\n            title: '省份'\r\n          }\r\n        }\r\n      },\r\n      goodsInfo: {\r\n        type: 'object',\r\n        properties: {\r\n          name: {\r\n            type: 'string',\r\n            title: '名称',\r\n            minLength: 2\r\n          },\r\n          children: {\r\n            type: 'array',\r\n            items: {\r\n              $ref: '#/definitions/goodsInfo'\r\n            }\r\n          }\r\n        }\r\n      }\r\n    },\r\n    type: 'object',\r\n    properties: {\r\n      billing_address: {\r\n        title: '账单寄送地址',\r\n        $ref: '#/definitions/address'\r\n      },\r\n      shipping_address: {\r\n        title: '收货地址',\r\n        $ref: '#/definitions/address'\r\n      },\r\n      goods: {\r\n        title: '商品详情',\r\n        $ref: '#/definitions/goodsInfo'\r\n      }\r\n    }\r\n  },\r\n  uiSchema: {},\r\n  default: {\r\n    billing_address: {\r\n      street: '南山大道2066号',\r\n      city: '深圳市',\r\n      province: '广东省'\r\n    },\r\n    shipping_address: {\r\n      street: '龙吴路33号',\r\n      city: '上海',\r\n      province: '上海市'\r\n    },\r\n    goods: {\r\n      name: '小天鹅洗烘套装组合',\r\n      children: [\r\n        {\r\n          name: '小天鹅洗衣机'\r\n        },\r\n        {\r\n          name: '小天鹅烘干机'\r\n        }\r\n      ]\r\n    }\r\n  }\r\n}\r\n","export default {\r\n  name: 'Dependencies',\r\n  schema: {\r\n    description: '表单字段的联动',\r\n    type: 'object',\r\n    properties: {\r\n      name: {\r\n        type: 'string',\r\n        title: '姓名',\r\n        minLength: 1\r\n      },\r\n      gender: {\r\n        type: 'array',\r\n        title: '性别',\r\n        items: {\r\n          type: 'string',\r\n          enum: ['男', '女']\r\n        }\r\n      }\r\n    },\r\n    dependentRequired: {\r\n      gender: ['name']\r\n    }\r\n  },\r\n  uiSchema: {},\r\n  default: {\r\n    gender: ['女']\r\n  }\r\n}\r\n","export default {\r\n  name: 'OneOf',\r\n  schema: {\r\n    description: '在多个schema中只符合其中一个schema即可通过校验',\r\n    title: 'oneOf',\r\n    type: 'object',\r\n    oneOf: [\r\n      {\r\n        properties: {\r\n          address: {\r\n            type: 'string',\r\n            minLength: 5,\r\n            title: '地址'\r\n          }\r\n        },\r\n        required: ['address']\r\n      },\r\n      {\r\n        properties: {\r\n          phone: {\r\n            type: 'string',\r\n            minLength: 11,\r\n            title: '手机'\r\n          }\r\n        },\r\n        required: ['phone']\r\n      }\r\n    ]\r\n  },\r\n  uiSchema: {},\r\n  default: {\r\n    age: 'ddddddd'\r\n  }\r\n}\r\n","export default {\r\n  name: 'AnyOf',\r\n  schema: {\r\n    description: '在多个schema中至少符合一个schema即可通过校验',\r\n    title: 'anyOf',\r\n    type: 'object',\r\n    anyOf: [\r\n      {\r\n        properties: {\r\n          address: {\r\n            type: 'string',\r\n            minLength: 5,\r\n            title: '地址'\r\n          }\r\n        }\r\n      },\r\n      {\r\n        properties: {\r\n          phone: {\r\n            type: 'string',\r\n            minLength: 11,\r\n            title: '手机'\r\n          }\r\n        }\r\n      }\r\n    ]\r\n  },\r\n  uiSchema: {},\r\n  default: {\r\n    address: 'ddddddd'\r\n  }\r\n}\r\n","import { defineComponent, ref, watch } from 'vue'\r\nimport { CommonWidgetPropsDefine } from '../../lib/types'\r\nimport { createFormItem } from '../../lib/theme-default/FormItem'\r\nexport default createFormItem(\r\n  defineComponent({\r\n    name: 'ColorPickerWidget',\r\n    props: CommonWidgetPropsDefine,\r\n    setup(props) {\r\n      const colorValueRef = ref(props.value)\r\n      watch(colorValueRef, (newV: any, oldV: any) => {\r\n        if (oldV !== newV) {\r\n          props.onChange(newV)\r\n        }\r\n      })\r\n\r\n      watch(\r\n        () => {\r\n          props.value\r\n        },\r\n        () => {\r\n          if (props.value !== colorValueRef.value) {\r\n            colorValueRef.value = props.value\r\n          }\r\n        },\r\n        {\r\n          deep: true\r\n        }\r\n      )\r\n      return () => {\r\n        return <el-color-picker v-model={colorValueRef.value}></el-color-picker>\r\n      }\r\n    }\r\n  })\r\n)\r\n","import { defineComponent, ref, watch } from 'vue'\r\nimport { CommonWidgetPropsDefine } from '../../lib/types'\r\nimport { createFormItem } from '../../lib/theme-default/FormItem'\r\nexport default createFormItem(\r\n  defineComponent({\r\n    name: 'DatePickerWidget',\r\n    props: CommonWidgetPropsDefine,\r\n    setup(props) {\r\n      const dateRef = ref(props.value)\r\n      watch(dateRef, (newV: any, oldV: any) => {\r\n        if (oldV !== newV) {\r\n          props.onChange(newV)\r\n        }\r\n      })\r\n\r\n      watch(\r\n        () => {\r\n          props.value\r\n        },\r\n        () => {\r\n          if (props.value !== dateRef.value) {\r\n            dateRef.value = props.value\r\n          }\r\n        },\r\n        {\r\n          deep: true\r\n        }\r\n      )\r\n      return () => {\r\n        return (\r\n          <el-date-picker\r\n            v-model={dateRef.value}\r\n            placeholder=\"Select date and time\"\r\n          ></el-date-picker>\r\n        )\r\n      }\r\n    }\r\n  })\r\n)\r\n","import { defineComponent } from 'vue'\r\nimport { CommonWidgetPropsDefine } from '../../lib/types'\r\nimport { createFormItem } from '../../lib/theme-default/FormItem'\r\nexport default createFormItem(\r\n  defineComponent({\r\n    name: 'PasswordWidget',\r\n    props: CommonWidgetPropsDefine,\r\n    setup(props) {\r\n      // do something\r\n      function handleChange(v: string) {\r\n        props.onChange(v)\r\n      }\r\n\r\n      return () => {\r\n        let value: any\r\n        // eslint-disable-next-line\r\n        value = props.value\r\n        return (\r\n          <el-input type=\"password\" onInput={handleChange} vModel={value} />\r\n        )\r\n      }\r\n    }\r\n  })\r\n)\r\n","import ColorPickerWidget from './customWidgets/ColorPickerWidget'\r\nimport DatePickerWidget from './customWidgets/DatePickerWidget'\r\nimport PasswordWidget from './customWidgets/PasswordWidget'\r\nexport default {\r\n  name: 'Widgets',\r\n  schema: {\r\n    description: '利用uiSchema扩展自定义小控件',\r\n    title: 'widgets',\r\n    type: 'object',\r\n    properties: {\r\n      color: {\r\n        type: 'string',\r\n        title: '颜色',\r\n        default: '#FFFFFF'\r\n      },\r\n      dateTime: {\r\n        type: 'string',\r\n        title: '日期',\r\n        default: ''\r\n      },\r\n      password: {\r\n        type: 'string',\r\n        title: '密码'\r\n      }\r\n    }\r\n  },\r\n  uiSchema: {\r\n    properties: {\r\n      color: {\r\n        widget: ColorPickerWidget\r\n      },\r\n      dateTime: {\r\n        widget: DatePickerWidget\r\n      },\r\n      password: {\r\n        widget: PasswordWidget\r\n      }\r\n    }\r\n  },\r\n  default: {\r\n    color: '#409EFF',\r\n    dateTime: '',\r\n    password: '123456'\r\n  }\r\n}\r\n","import { defineComponent, ref } from 'vue'\r\nimport { CommonWidgetPropsDefine } from '../../lib/types'\r\nimport { createFormItem } from '../../lib/theme-default/FormItem'\r\nimport { UploadProps, UploadUserFile } from 'element-plus'\r\nimport { createUseStyles } from 'vue-jss'\r\nconst useStyles = createUseStyles({\r\n  btn: {\r\n    margin: '10px 0 10px',\r\n    padding: '7px 10px',\r\n    fontSize: '14px',\r\n    color: '#fff',\r\n    backgroundColor: '#39828f',\r\n    border: 0,\r\n    borderRadius: '4px',\r\n    cursor: 'pointer',\r\n    '&:hover': {\r\n      backgroundColor: '#619ba5',\r\n      color: '#fff'\r\n    },\r\n    '&:focus': {\r\n      backgroundColor: '#39828f',\r\n      color: '#fff'\r\n    }\r\n  }\r\n})\r\nexport default createFormItem(\r\n  defineComponent({\r\n    name: 'UploadWidget',\r\n    props: CommonWidgetPropsDefine,\r\n    setup(props) {\r\n      const actionRef = ref(\r\n        props.uiSchema && props.uiSchema.action ? props.uiSchema.action : ''\r\n      )\r\n      const fileListRef = ref<UploadUserFile[]>([\r\n        {\r\n          name: '文件1',\r\n          url: props.value as string\r\n        }\r\n      ])\r\n      const classesRef = useStyles()\r\n\r\n      return () => {\r\n        const classes = classesRef.value\r\n        const action = actionRef.value\r\n        const fileList = fileListRef.value\r\n        return (\r\n          <el-upload action={action} fileList={fileList}>\r\n            <el-button type=\"primary\" class={classes.btn}>\r\n              点击上传\r\n            </el-button>\r\n          </el-upload>\r\n        )\r\n      }\r\n    }\r\n  })\r\n)\r\n","import UploadWidget from './customWidgets/UploadWidget'\r\nexport default {\r\n  name: 'Files',\r\n  schema: {\r\n    description: '上传文件',\r\n    title: 'files',\r\n    type: 'object',\r\n    properties: {\r\n      single: {\r\n        type: 'string',\r\n        title: '单个文件',\r\n        default:\r\n          'http://img.alicdn.com/tfs/TB1vYlkdnZmx1VjSZFGXXax2XXa-468-644.jpg_320x5000q100.jpg_.webp'\r\n      }\r\n    }\r\n  },\r\n  uiSchema: {\r\n    properties: {\r\n      single: {\r\n        widget: UploadWidget,\r\n        action: 'https://run.mocky.io/v3/9d059bf9-4660-45f2-925d-ce80ad6c4d15'\r\n      }\r\n    }\r\n  },\r\n  default: {\r\n    single:\r\n      'http://img.alicdn.com/tfs/TB1vYlkdnZmx1VjSZFGXXax2XXa-468-644.jpg_320x5000q100.jpg_.webp'\r\n  }\r\n}\r\n","export default {\r\n  name: 'CustomFormat',\r\n  schema: {\r\n    description: '自定义 format 关键字',\r\n    title: '自定义format关键字',\r\n    type: 'object',\r\n    properties: {\r\n      email: {\r\n        type: 'string',\r\n        format: 'email',\r\n        title: '邮箱地址'\r\n      },\r\n      url: {\r\n        type: 'string',\r\n        format: 'url',\r\n        title: 'URL'\r\n      }\r\n    }\r\n  },\r\n  uiSchema: {},\r\n  default: {\r\n    email: 'yyw3334@126.com',\r\n    url: 'https://www.mazel98.com'\r\n  }\r\n}\r\n","export default {\r\n  name: 'Hidden(表单联动)',\r\n  schema: {\r\n    description: '通过控制开关隐藏/展示相关表单',\r\n    title: '隐藏表单',\r\n    type: 'object',\r\n    properties: {\r\n      showMore: {\r\n        title: '显示更多表单',\r\n        type: 'boolean',\r\n        default: false\r\n      },\r\n      x1: {\r\n        title: '隐藏表单1',\r\n        type: 'string',\r\n        default: '请输入...'\r\n      }\r\n    }\r\n  },\r\n  uiSchema: {\r\n    properties: {\r\n      x1: {\r\n        hidden: '{{rootFormData.showMore === false}}'\r\n      }\r\n    }\r\n  },\r\n  default: {\r\n    showMore: true\r\n  }\r\n}\r\n","import Simple from './Simple'\r\nimport Nested from './Nested'\r\nimport Arrays from './Arrays'\r\nimport Number from './Number'\r\nimport References from './References'\r\nimport Dependencies from './Dependencies'\r\nimport OneOf from './OneOf'\r\nimport AnyOf from './AnyOf'\r\nimport Widgets from './Widgets'\r\nimport Files from './Files'\r\nimport CustomFormat from './CustomFormat'\r\nimport Hidden from './Hidden'\r\nexport default [\r\n  Simple,\r\n  Nested,\r\n  Number,\r\n  Arrays,\r\n  References,\r\n  Dependencies,\r\n  OneOf,\r\n  AnyOf,\r\n  Widgets,\r\n  Files,\r\n  CustomFormat,\r\n  Hidden\r\n]\r\n","import { defineComponent, ref, watch, watchEffect } from 'vue'\r\nimport { SelectWidgetPropsDefine } from '../../types'\r\nimport { createFormItem } from '../FormItem'\r\nexport default createFormItem(\r\n  defineComponent({\r\n    name: 'SelectWidget',\r\n    props: SelectWidgetPropsDefine,\r\n    setup(props) {\r\n      /* eslint-disable-next-line */\r\n      let curValRef = ref(props.value as any)\r\n      watch(curValRef, (newV: any, oldV: any) => {\r\n        if (oldV !== newV) {\r\n          props.onChange(newV)\r\n        }\r\n      })\r\n\r\n      watch(\r\n        () => {\r\n          props.value\r\n        },\r\n        () => {\r\n          if (props.value !== curValRef.value) {\r\n            curValRef.value = props.value\r\n          }\r\n        },\r\n        {\r\n          deep: true\r\n        }\r\n      )\r\n      return () => {\r\n        const { options } = props\r\n\r\n        return (\r\n          <el-select v-model={curValRef.value}>\r\n            {options?.map((opt) => {\r\n              return <el-option label={opt.label} value={opt.value}></el-option>\r\n            })}\r\n          </el-select>\r\n        )\r\n      }\r\n    }\r\n  })\r\n)\r\n","import { defineComponent } from 'vue'\r\nimport { CommonWidgetPropsDefine } from '@/lib/types'\r\nimport { createFormItem } from '../FormItem'\r\nexport default createFormItem(\r\n  defineComponent({\r\n    name: 'TextWidget',\r\n    props: CommonWidgetPropsDefine,\r\n    setup(props) {\r\n      // do something\r\n      const handleChange = (v: any) => {\r\n        props.onChange(v)\r\n      }\r\n\r\n      return () => {\r\n        let value: any\r\n        // eslint-disable-next-line\r\n        value = props.value\r\n        return (\r\n          <div>\r\n            <el-input type=\"text\" onInput={handleChange} v-model={value} />\r\n          </div>\r\n        )\r\n      }\r\n    }\r\n  })\r\n)\r\n","import { defineComponent } from 'vue'\r\nimport { CommonWidgetPropsDefine } from '@/lib/types'\r\nimport { createFormItem } from '../FormItem'\r\nexport default createFormItem(\r\n  defineComponent({\r\n    name: 'NumberWidget',\r\n    props: CommonWidgetPropsDefine,\r\n    setup(props) {\r\n      // do something\r\n      const handleChange = (v: any) => {\r\n        const num = Number(v)\r\n        v = props.value\r\n        if (Number.isNaN(num)) {\r\n          props.onChange(undefined)\r\n        } else {\r\n          props.onChange(num)\r\n        }\r\n      }\r\n\r\n      return () => {\r\n        let value: any\r\n        // eslint-disable-next-line\r\n        value = props.value\r\n        return (\r\n          <div>\r\n            <el-input type=\"number\" onInput={handleChange} v-model={value} />\r\n          </div>\r\n        )\r\n      }\r\n    }\r\n  })\r\n)\r\n","import { defineComponent, ref, watch } from 'vue'\r\nimport { createFormItem } from '../FormItem'\r\nimport { SelectWidgetPropsDefine } from '../../types'\r\nexport default createFormItem(\r\n  defineComponent({\r\n    name: 'RadioWidget',\r\n    props: SelectWidgetPropsDefine,\r\n    setup(props) {\r\n      const curValRef = ref((props.value as Array<string>) || [])\r\n      watch(curValRef, (newV: any, oldV: any) => {\r\n        if (oldV !== newV) {\r\n          props.onChange(newV)\r\n        }\r\n      })\r\n\r\n      watch(\r\n        () => {\r\n          props.value\r\n        },\r\n        (val: any) => {\r\n          if (val !== curValRef.value) {\r\n            curValRef.value = val\r\n          }\r\n        }\r\n      )\r\n\r\n      return () => {\r\n        const { options } = props\r\n        const curVal = curValRef.value\r\n\r\n        return (\r\n          <el-radio-group v-model={curVal[0]}>\r\n            {options?.map((radio) => {\r\n              return <el-radio label={radio.label}>{radio.value}</el-radio>\r\n            })}\r\n          </el-radio-group>\r\n        )\r\n      }\r\n    }\r\n  })\r\n)\r\n","import { defineComponent, ref, watch } from 'vue'\r\nimport { SelectWidgetPropsDefine } from '../../types'\r\nimport { createFormItem } from '../FormItem'\r\nexport default createFormItem(\r\n  defineComponent({\r\n    name: 'CheckboxWidget',\r\n    props: SelectWidgetPropsDefine,\r\n    setup(props) {\r\n      const curValRef = ref(props.value || [])\r\n\r\n      watch(curValRef, (newV: any, oldV: any) => {\r\n        if (oldV !== newV) {\r\n          props.onChange(newV, undefined)\r\n        }\r\n      })\r\n\r\n      // watch(\r\n      //   () => {\r\n      //     props.value\r\n      //   },\r\n      //   (val: any) => {\r\n      //     if (val !== curValRef.value) {\r\n      //       curValRef.value = val\r\n      //     }\r\n      //   }\r\n      // )\r\n      watch(\r\n        () => {\r\n          props.value\r\n        },\r\n        () => {\r\n          if (props.value !== curValRef.value) {\r\n            curValRef.value = props.value as any\r\n          }\r\n        },\r\n        {\r\n          deep: true\r\n        }\r\n      )\r\n      return () => {\r\n        const { options } = props\r\n\r\n        return (\r\n          <el-checkbox-group v-model={curValRef.value}>\r\n            {options?.map((opt) => {\r\n              return <el-checkbox label={opt.label} />\r\n            })}\r\n          </el-checkbox-group>\r\n        )\r\n      }\r\n    }\r\n  })\r\n)\r\n","import { defineComponent } from 'vue'\r\nimport { CommonWidgetPropsDefine } from '@/lib/types'\r\nimport { createFormItem } from '../FormItem'\r\nexport default createFormItem(\r\n  defineComponent({\r\n    name: 'IntegerWidget',\r\n    props: CommonWidgetPropsDefine,\r\n    setup(props) {\r\n      // do something\r\n      const handleChange = (v: any) => {\r\n        const num = Number(v)\r\n        v = props.value\r\n        if (Number.isNaN(num)) {\r\n          props.onChange(undefined)\r\n        } else {\r\n          props.onChange(num)\r\n        }\r\n      }\r\n\r\n      return () => {\r\n        let value: any\r\n        // eslint-disable-next-line\r\n        value = props.value\r\n        return (\r\n          <el-input type=\"integer\" onInput={handleChange} v-model={value} />\r\n        )\r\n      }\r\n    }\r\n  })\r\n)\r\n","import { defineComponent, ref, watch } from 'vue'\r\nimport { CommonWidgetPropsDefine } from '@/lib/types'\r\nimport { createFormItem } from '@/lib/theme-default/FormItem'\r\nexport default createFormItem(\r\n  defineComponent({\r\n    name: 'BooleanWidget',\r\n    props: CommonWidgetPropsDefine,\r\n    setup(props) {\r\n      /* eslint-disable-next-line */\r\n      let curValRef = ref((props.value || true) as any)\r\n      watch(curValRef, (newV: any, oldV: any) => {\r\n        if (oldV !== newV) {\r\n          props.onChange(newV)\r\n        }\r\n      })\r\n\r\n      watch(\r\n        () => {\r\n          props.value\r\n        },\r\n        () => {\r\n          if (props.value !== curValRef.value) {\r\n            curValRef.value = props.value\r\n          }\r\n        },\r\n        {\r\n          deep: true\r\n        }\r\n      )\r\n      return () => {\r\n        return <el-switch v-model={curValRef.value} />\r\n      }\r\n    }\r\n  })\r\n)\r\n","import { defineComponent } from 'vue'\r\nimport './index.scss'\r\nexport default defineComponent({\r\n  name: 'FormWrapper',\r\n  props: {},\r\n  setup(props, { slots }) {\r\n    // do something\r\n    return () => {\r\n      return (\r\n        <el-card shadow=\"hover\">\r\n          <el-form label-position={'left'}>\r\n            {slots.default && slots.default()}\r\n          </el-form>\r\n        </el-card>\r\n      )\r\n    }\r\n  }\r\n})\r\n","import { defineComponent, PropType } from 'vue'\r\nexport default defineComponent({\r\n  name: 'BtnWrapper',\r\n  props: {},\r\n  setup(props, { slots }) {\r\n    // do something\r\n    return () => {\r\n      return <el-button>{slots.default && slots.default()}</el-button>\r\n    }\r\n  }\r\n})\r\n","import SelectWidget from './Widgets/SelectWidget'\r\nimport TextWidget from './Widgets/TextWidget'\r\nimport NumberWidget from './Widgets/NumberWidget'\r\nimport RadioWidget from './Widgets/RadioWidget'\r\nimport CheckboxWidget from './Widgets/CheckboxWidget'\r\nimport IntegerWidget from './Widgets/IntegerWidget'\r\nimport BooleanWidget from './Widgets/BooleanWidget'\r\nimport FormWrapper from './FormWrapper'\r\nimport BtnWrapper from './BtnWrapper'\r\nexport default {\r\n  widgets: {\r\n    SelectWidget: SelectWidget,\r\n    TextWidget: TextWidget,\r\n    NumberWidget: NumberWidget,\r\n    RadioWidget: RadioWidget,\r\n    CheckboxWidget: CheckboxWidget,\r\n    IntegerWidget: IntegerWidget,\r\n    BooleanWidget: BooleanWidget\r\n  },\r\n  wrapper: {\r\n    Form: FormWrapper,\r\n    Btn: BtnWrapper\r\n  }\r\n}\r\n","import { defineComponent } from 'vue'\r\nimport { CommonWidgetPropsDefine, CustomFormat } from '../lib/types'\r\nimport { createFormItem } from '@/lib/theme-default/FormItem'\r\nconst format: CustomFormat[] = [\r\n  {\r\n    name: 'email',\r\n    definition: {\r\n      type: 'string',\r\n      validate: /^\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*$/\r\n    },\r\n    component: createFormItem(\r\n      defineComponent({\r\n        name: 'EmailWidget',\r\n        props: CommonWidgetPropsDefine,\r\n        setup(props) {\r\n          function handleChange(v: string) {\r\n            props.onChange(v)\r\n          }\r\n\r\n          return () => {\r\n            let value: any\r\n            // eslint-disable-next-line\r\n            value = props.value\r\n            return (\r\n              <el-input type=\"email\" onInput={handleChange} vModel={value} />\r\n            )\r\n          }\r\n        }\r\n      })\r\n    )\r\n  },\r\n  {\r\n    name: 'url',\r\n    definition: {\r\n      type: 'string',\r\n      validate:\r\n        /(https?|ftp|file):\\/\\/[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]/\r\n    },\r\n    component: createFormItem(\r\n      defineComponent({\r\n        name: 'UrlWidget',\r\n        props: CommonWidgetPropsDefine,\r\n        setup(props) {\r\n          function handleChange(v: string) {\r\n            props.onChange(v)\r\n          }\r\n          return () => {\r\n            let value: any\r\n            // eslint-disable-next-line\r\n            value = props.value\r\n            return <el-input type=\"url\" onInput={handleChange} vModel={value} />\r\n          }\r\n        }\r\n      })\r\n    )\r\n  }\r\n]\r\n\r\nexport default format\r\n","import { defineComponent, ref, reactive, Ref, watchEffect, watch } from 'vue'\nimport MonacoEditor from './components/MonacoEditor'\nimport { createUseStyles } from 'vue-jss'\nimport SchemaForm from './lib/SchemaForm'\nimport demos from './demos'\nimport { ThemeProvider } from './lib/theme'\nimport themeDefault from './lib/theme-default'\n\nimport customFormats from '../src/plugins/customFormat'\nimport customKeyword from '../src/plugins/customKeyword'\n\ntype Schema = any\ntype UISchema = any\nconst useStyles = createUseStyles({\n  container: {\n    display: 'flex',\n    flexDirection: 'column',\n    height: '100%',\n    margin: '0 auto',\n    width: '1300px'\n  },\n  title: {\n    color: '#5f5d5e'\n  },\n  menu: {\n    dsiplay: 'flex'\n  },\n  menuButton: {\n    color: 'white',\n    padding: '8px 12px',\n    margin: '10px 20px 30px 0',\n    backgroundColor: '#39828f',\n    border: 0,\n    borderRadius: '5px',\n    cursor: 'pointer',\n    '&:hover': {\n      backgroundColor: '#619ba5'\n    }\n  },\n  content: {\n    display: 'flex'\n  },\n  code: {\n    width: 800,\n    flexShrink: 0\n  },\n  uiAndValue: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    '& > *': {\n      width: '48%'\n    }\n  },\n  form: {\n    flexGrow: 1,\n    marginLeft: 40\n  },\n  codePanel: {\n    margin: '0 0 20px 0',\n    minHeight: 300\n  },\n  validateBtn: {\n    margin: '25px 0 10px',\n    padding: '7px 10px',\n    fontSize: '16px',\n    color: '#fff',\n    backgroundColor: '#39828f',\n    border: 0,\n    borderRadius: '4px',\n    cursor: 'pointer',\n    '&:hover': {\n      backgroundColor: '#619ba5'\n    },\n    '&:focus': {\n      backgroundColor: '#39828f'\n    }\n  },\n  btnContent: {\n    color: '#fff'\n  }\n})\n\n// 把要传入的 code 格式化\nfunction toJSON(data: any) {\n  return JSON.stringify(data, null, 2)\n}\n\nexport default defineComponent({\n  setup() {\n    const selectedRef = ref(0)\n\n    const demo: {\n      schema: Schema | null\n      data: any\n      uiSchema: UISchema | null\n      schemaCode: string\n      dataCode: string\n      uiSchemaCode: string\n      customValidate: ((data: any, errors: any) => void) | undefined\n    } = reactive({\n      schema: null,\n      data: {},\n      uiSchema: {},\n      schemaCode: '',\n      dataCode: '',\n      uiSchemaCode: '',\n      customValidate: undefined\n    })\n\n    watchEffect(() => {\n      const index = selectedRef.value\n\n      const d: any = demos[index]\n      demo.schema = d.schema\n      demo.data = d.default\n      demo.uiSchema = d.uiSchema\n      demo.schemaCode = toJSON(d.schema)\n      demo.dataCode = toJSON(d.default)\n      demo.customValidate = d.customValidate\n      demo.uiSchemaCode = toJSON(d.uiSchema)\n    })\n\n    const classesRef = useStyles()\n\n    // 用于右侧表单的 onChange监听函数\n    const handleChange = (v: any) => {\n      demo.data = v\n      demo.dataCode = toJSON(v)\n    }\n\n    const handleCodeChange = (\n      field: 'schema' | 'data' | 'uiSchema',\n      value: string\n    ) => {\n      try {\n        const json = JSON.parse(value)\n        demo[field] = json\n        ;(demo as any)[`${field}Code`] = value\n      } catch (err) {\n        console.log(err)\n      }\n    }\n    const handleSchemaChange = (v: string) => handleCodeChange('schema', v)\n    const handleDataChange = (v: string) => handleCodeChange('data', v)\n    const handleUISchemaChange = (v: string) => handleCodeChange('uiSchema', v)\n\n    const contextRef: Ref = ref()\n\n    function valideForm() {\n      contextRef.value\n        .doValidate()\n        .then((result: any) => {\n          console.log(result)\n        })\n        .catch((error: Error) => {\n          console.error(error.message)\n        })\n    }\n    return () => {\n      const classes = classesRef.value\n      // switch button component dynamically\n      const BtnComponent = themeDefault.wrapper?.Btn\n        ? themeDefault.wrapper?.Btn\n        : 'button'\n      return (\n        <div class={classes.container}>\n          <h1 class={classes.title}> Vue3 JSON Schema Form </h1>\n          <div class={classes.menu}>\n            <div>\n              {demos.map((demo, index) => (\n                <button\n                  class={classes.menuButton}\n                  onClick={() => (selectedRef.value = index)}\n                >\n                  {demo.name}\n                </button>\n              ))}\n            </div>\n          </div>\n          <div class={classes.content}>\n            <div class={classes.code}>\n              <MonacoEditor\n                code={demo.schemaCode}\n                class={classes.codePanel}\n                onChange={handleSchemaChange}\n                title=\"Schema\"\n              ></MonacoEditor>\n              <div class={classes.uiAndValue}>\n                <MonacoEditor\n                  code={demo.uiSchemaCode}\n                  class={classes.codePanel}\n                  onChange={handleUISchemaChange}\n                  title=\"UISchema\"\n                />\n                <MonacoEditor\n                  code={demo.dataCode}\n                  class={classes.codePanel}\n                  onChange={handleDataChange}\n                  title=\"Value\"\n                />\n              </div>\n            </div>\n            <div class={classes.form}>\n              <ThemeProvider theme={themeDefault}>\n                <SchemaForm\n                  schema={demo.schema}\n                  value={demo.data}\n                  onChange={handleChange}\n                  contextRef={contextRef}\n                  customValidate={demo.customValidate}\n                  uiSchema={demo.uiSchema || {}}\n                  customFormats={customFormats}\n                  customKeyword={customKeyword}\n                  curNodePath=\"\"\n                  rootFormData={demo.data}\n                ></SchemaForm>\n                <BtnComponent class={classes.validateBtn} onClick={valideForm}>\n                  <span class={classes.btnContent}>校验</span>\n                </BtnComponent>\n              </ThemeProvider>\n            </div>\n          </div>\n        </div>\n      )\n    }\n  }\n})\n","import { createApp } from 'vue'\nimport ElementPlus from 'element-plus'\nimport 'element-plus/dist/index.css'\nimport App from './App'\n\nconst app = createApp(App)\napp.use(ElementPlus)\napp.mount('#app')\n","import { CustomKeyword } from '../lib/types'\r\nimport { _, KeywordCxt, CodeKeywordDefinition } from 'ajv'\r\n// const keyword: CustomKeyword = {\r\n//   name: 'studentID',\r\n//   definition: {\r\n//     keyword: 'studentID',\r\n//     macro: () => {\r\n//       return {\r\n//         minLength: 10\r\n//       }\r\n//     }\r\n//   },\r\n//   updateSchema(schema) {\r\n//     return {\r\n//       ...schema,\r\n//       minLength: 10\r\n//     }\r\n//   }\r\n// }\r\n\r\nconst keyword: CodeKeywordDefinition[] = [\r\n  {\r\n    keyword: 'vjsf-hidden',\r\n    type: 'string',\r\n    schemaType: 'string',\r\n    code(cxt) {\r\n      const { schema, parentSchema } = cxt\r\n      eval(schema)\r\n      cxt.fail(_`!eval(schema)`)\r\n    }\r\n  }\r\n]\r\n\r\nexport default keyword\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","__webpack_require__.amdO = {};","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = function(chunkId) {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce(function(promises, key) {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = function(chunkId) {\n\t// return url for filenames based on template\n\treturn \"js/\" + chunkId + \".\" + \"4f90c66c\" + \".js\";\n};","// This function allow to reference async chunks\n__webpack_require__.miniCssF = function(chunkId) {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.hmd = function(module) {\n\tmodule = Object.create(module);\n\tif (!module.children) module.children = [];\n\tObject.defineProperty(module, 'exports', {\n\t\tenumerable: true,\n\t\tset: function() {\n\t\t\tthrow new Error('ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: ' + module.id);\n\t\t}\n\t});\n\treturn module;\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","var inProgress = {};\nvar dataWebpackPrefix = \"vue3-json-schema-form:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = function(url, done, key, chunkId) {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = function(prev, event) {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach(function(fn) { return fn(event); });\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = function(module) {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","__webpack_require__.p = \"/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n__webpack_require__.f.j = function(chunkId, promises) {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise(function(resolve, reject) { installedChunkData = installedChunks[chunkId] = [resolve, reject]; });\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = function(event) {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t} else installedChunks[chunkId] = 0;\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkvue3_json_schema_form\"] = self[\"webpackChunkvue3_json_schema_form\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(1389); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["useStyles","createUseStyles","container","border","display","flexDirection","borderRadius","title","backgroundColor","padding","paddingLeft","code","flexGrow","defineComponent","name","props","type","String","required","onChange","Function","setup","editorRef","shallowRef","containerRef","ref","_subscription","__preventTriggerChangeEvent","onMounted","editor","value","Monaco","language","formatOnPaste","tabSize","minimap","enabled","onDidChangeModelContent","event","getValue","onBeforeMount","dispose","watch","v","model","getModel","pushUndoStop","pushEditOperations","range","getFullModelRange","text","classesRef","classes","_createVNode","SchemaFormContextKey","Symbol","useVJSFContext","context","inject","Error","SchemaTypes","SchemaPropsDefine","schema","Object","rootSchema","errorSchema","uiSchema","customFormats","Array","isRequired","Boolean","rootFormData","default","curNodePath","MultiSchemaPropsDefine","options","CommonWidgetPropsDefine","errors","SelectWidgetPropsDefine","WidgetName","isObject","thing","isArray","hasOwnProperty","obj","key","prototype","call","defaultInstance","Ajv","validateData","data","valid","validate","resolveSchema","formData","resolveReference","resolvedSchema","resolveDependencies","retrieveSchema","allOf","map","allOfSubschema","mergeAllOf","e","console","warn","resolvedSchemaWithoutAllOf","hasAdditionalProperties","additionalProperties","stubExistingAdditionalProperties","ADDITIONAL_PROPERTY_FLAG","properties","keys","forEach","$ref","guessType","$refSchema","findSchemaDefinition","localSchema","log","origRef","startsWith","decodeURIComponent","substring","current","jsonpointer","get","undefined","dependentRequired","dependentSchemas","oneOf","getMatchingOption","anyOf","processDependentProperties","processDependentSchema","dependencies","dependencyKey","dependencyValue","remainingDependencies","withDependentProperties","withDependentSchema","additionallyRequired","item","index","splice","from","Set","dependentSchema","mergeSchemas","resolvedOneOf","subschema","withExactlyOneSubschema","validSubschemas","filter","conditionPropertySchema","conditionSchema","length","dependentSubschema","obj1","obj2","acc","assign","reduce","left","right","getSchemaType","union","const","enum","t","includes","find","isNaN","i","option","requiresAnyOf","augmentedSchema","shallowClone","slice","push","getPathVal","path","leftDeviation","pathArr","split","regExpression","handleExpression","expression","callBack","matchExpression","exec","lastIndex","trim","fn","isHiddenWidget","widget","hiddenExpression","hidden","computedCurPath","prePath","curKey","join","THEME_PROVIDER_KEY","ThemeProvider","theme","slots","computed","provide","Component","wrapper","Form","getWidget","formContext","format","formatMapRef","widgetRef","widgets","NumberWidgetRef","NumberWidget","handleChange","__errors","TextWidgetRef","TextWidget","schemaTitle","color","fontWeight","fontSize","marginBottom","objTitle","borderBottom","handleObjFieldChange","k","SchemaItem","curV","findIndex","actions","background","textAlign","action","marignRight","content","ArrayItemWrapper","onAdd","onDelete","onUp","onDown","Number","BtnComponentRef","Btn","sizeRef","BtnComponent","size","handleAdd","handleDelete","handleUp","handleDown","_createTextVNode","hanldeArrayItemChange","valueArr","cur","SelectWidgetRef","SelectWidget","RadioWidgetRef","RadioWidget","CheckboxWidgetRef","CheckboxWidget","isMultiType","items","isSelect","itemArr","itemsUISchema","itemUISchema","_mergeProps","enumArr","selectOpts","label","IntegerWidgetRef","IntegerWidget","BooleanWidgetRef","BooleanWidget","selectedOptRef","watchEffect","selectedSchemaRef","MultiSchemaRef","enumOptions","opt","onSelectChange","selectedOption","selectedSchema","MultiSchemaWidget","retrievedSchemaRef","isHiddenRef","isHidden","retrievedSchema","MultiSchemaField","STRING","StringField","NUMBER","NumberField","OBJECT","ObjectField","ARRAY","ArrayField","INTEGER","IntegerField","BOOLEAN","BooleanField","formatErrorList","error","keyword","instancePath","schemaPath","params","message","property","formatErrSchema","errSchema","parent","segment","concat","async","validateFormData","validator","locale","customValidate","validatorErr","i18n","validatorErrMsg","proxy","createErrorProxy","newErrorSchema","mergeObjs","raw","Proxy","target","receiver","msg","Reflect","targetObj","p","concatArr","accumulator","contextRef","ajvOpts","customKeyword","result","component","defaultAjvOpts","allErrors","validatorRef","errorSchemaRef","addFormat","definition","customKeywords","addKeyword","validateResolveRef","validateIndex","newValidate","res","doValidate","Promise","resolve","immediate","deep","description","age","mobile","minLength","city","defaultAddress","firstName","lastName","errorMessage","contactInfo","phone","email","interest","errorText","margin","list","listStyleType","createFormItem","Widget","FormItem","_resolveComponent","err","attrs","curValRef","newV","oldV","val","min","minimum","max","maximum","step","multipleOf","$event","rating","service","delivery","SliderWidget","definitions","address","street","province","goodsInfo","children","billing_address","shipping_address","goods","gender","colorValueRef","dateRef","dateTime","password","ColorPickerWidget","DatePickerWidget","PasswordWidget","btn","cursor","actionRef","fileListRef","url","fileList","single","UploadWidget","showMore","x1","Simple","Nested","Arrays","References","Dependencies","OneOf","AnyOf","Widgets","Files","CustomFormat","Hidden","num","curVal","radio","FormWrapper","BtnWrapper","height","width","menu","dsiplay","menuButton","flexShrink","uiAndValue","justifyContent","form","marginLeft","codePanel","minHeight","validateBtn","btnContent","toJSON","JSON","stringify","selectedRef","demo","reactive","schemaCode","dataCode","uiSchemaCode","d","demos","handleCodeChange","field","json","parse","handleSchemaChange","handleDataChange","handleUISchemaChange","valideForm","then","catch","themeDefault","onClick","MonacoEditor","SchemaForm","app","createApp","App","use","ElementPlus","mount","schemaType","cxt","parentSchema","eval","fail","_","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","id","loaded","__webpack_modules__","m","amdO","deferred","O","chunkIds","priority","notFulfilled","Infinity","fulfilled","j","every","r","n","getter","__esModule","a","o","defineProperty","enumerable","f","chunkId","all","promises","u","miniCssF","g","globalThis","this","window","hmd","create","set","prop","inProgress","dataWebpackPrefix","l","done","script","needAttach","scripts","document","getElementsByTagName","s","getAttribute","createElement","charset","timeout","nc","setAttribute","src","onScriptComplete","prev","onerror","onload","clearTimeout","doneFns","parentNode","removeChild","setTimeout","bind","head","appendChild","toStringTag","nmd","paths","installedChunks","installedChunkData","promise","reject","loadingEnded","errorType","realSrc","request","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","__webpack_exports__"],"sourceRoot":""}