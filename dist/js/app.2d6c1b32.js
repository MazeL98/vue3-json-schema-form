(function(){"use strict";var __webpack_modules__={1389:function(e,t,r){var n=r(9242),a=r(2002),o=(r(4415),r(3396)),i=r(4870),u=r(978),l=r(1328);const s=(0,l.createUseStyles)({container:{border:"1px solid #eee",display:"flex",flexDirection:"column",borderRadius:5},title:{backgroundColor:"#eee",padding:"10px 0",paddingLeft:20},code:{flexGrow:1}});var c=(0,o.aZ)({name:"MonacoEditor",props:{code:{type:String,required:!0},onChange:{type:Function,required:!0},title:{type:String,required:!0}},setup(e){const t=(0,i.XI)(),r=(0,i.iH)();let n,a=!1;(0,o.bv)((()=>{const o=t.value=u["default"].editor.create(r.value,{value:e.code,language:"json",formatOnPaste:!0,tabSize:2,minimap:{enabled:!1}});n=o.onDidChangeModelContent((t=>{a||e.onChange(o.getValue(),t)}))})),(0,o.wF)((()=>{n&&n.dispose()})),(0,o.YP)((()=>e.code),(e=>{const r=t.value,n=r.getModel();e!==n.getValue()&&(r.pushUndoStop(),a=!0,n.pushEditOperations([],[{range:n.getFullModelRange(),text:e}]),r.pushUndoStop(),a=!1)}));const l=s();return()=>{const t=l.value;return(0,o.Wm)("div",{class:t.container},[(0,o.Wm)("div",{class:t.title},[(0,o.Wm)("span",null,[e.title])]),(0,o.Wm)("div",{class:t.code,ref:r},null)])}}});const d=Symbol();function p(){const e=(0,o.f3)(d);if(!e)throw Error("SchemaForm should be used!");return e}var m;(function(e){e["NUMBER"]="number",e["INTEGER"]="integer",e["STRING"]="string",e["OBJECT"]="object",e["ARRAY"]="array",e["BOOLEAN"]="boolean"})(m||(m={}));const f={schema:{type:Object,required:!0},value:{required:!0},rootSchema:{type:Object},onChange:{type:Function,required:!0},errorSchema:{type:Object,required:!0},uiSchema:{type:Object},customFormats:{type:[Array,Object]},isRequired:{type:Boolean},rootFormData:{default:{}},curNodePath:{}},h={...f,options:{type:Array,required:!0}},_={value:{required:!0},schema:{type:Object,required:!0},onChange:{type:Function,required:!0},errors:{type:Array},isRequired:{type:Boolean},uiSchema:{type:Object}},g=((0,o.aZ)({props:_}),{..._,options:{type:Array,required:!0}});(0,o.aZ)({props:g});var v;(function(e){e["SelectWidget"]="SelectWidget",e["TextWidget"]="TextWidget",e["NumberWidget"]="NumberWidget",e["RadioWidget"]="RadioWidget",e["CheckboxWidget"]="CheckboxWidget",e["IntegerWidget"]="IntegerWidget",e["BooleanWidget"]="BooleanWidget"})(v||(v={}));r(7658);var y=r(7868),b=r.n(y),w=r(1745),S=r(2881),W=r.n(S),k=r(625),q=r.n(k);function O(e){return"object"===typeof e&&null!==e&&!Array.isArray(e)}function x(e,t){return Object.prototype.hasOwnProperty.call(e,t)}const C=new(b());function j(e,t){const r=C.validate(e,t);return{valid:r,errors:C.errors}}function A(e,t={},r={}){if(x(e,"$ref"))return N(e,t,r);if(x(e,"dependentRequired")||x(e,"dependentSchemas")){const n=U(e,t,r);return F(n,t,r)}return x(e,"allOf")&&Array.isArray(e.allOf)?{...e,allOf:e.allOf.map((e=>F(e,t,r)))}:e}function F(e,t={},r={}){if(!O(e))return{};let n=A(e,t,r);if("allOf"in e)try{n=q()({...n,allOf:n.allOf})}catch(o){console.warn("could not merge subschemas in allOf:\n"+o);const{allOf:e,...t}=n;return t}const a=n.hasOwnProperty("additionalProperties")&&!1!==n.additionalProperties;return a?R(n,t,r):n}const P="__additional_property";function R(e,t={},r={}){return e={...e,properties:{...e.properties}},Object.keys(r).forEach((n=>{if(e.properties.hasOwnProperty(n))return;let a;a=e.additionalProperties.hasOwnProperty("$ref")?F({$ref:e.additionalProperties["$ref"]},t,r):e.additionalProperties.hasOwnProperty("type")?{...e.additionalProperties}:{type:L(r[n])},e.properties[n]=a,e.properties[n][P]=!0})),e}function N(e,t,r){const n=E(e.$ref,t),{$ref:a,...o}=e;return F({...n,...o},t,r)}function E(e,t={}){console.log(t);const r=e;if(!e.startsWith("#"))throw new Error(`Could not find a definition for ${r}.`);e=decodeURIComponent(e.substring(1));const n=w.get(t,e);if(void 0===n)throw new Error(`Could not find a definition for ${r}.`);return x(n,"$ref")?E(n.$ref,t):n}function U(e,t,r){let{dependentRequired:n={},dependentSchemas:a={},...o}=e;return"oneOf"in o?o=o.oneOf[$(r,o.oneOf)]:"anyOf"in o&&(o=o.anyOf[$(r,o.anyOf)]),n?V(n,o,t,r):a?Z(a,o,t,r):o}function V(e,t,r,n){for(const a in e){if(void 0===n[a])continue;if(t.properties&&!(a in t.properties))continue;const{[a]:o,...i}=e;return t=I(t,o),V(i,t,r,n)}return t}function Z(e,t,r,n){for(const a in e){if(void 0===n[a])continue;if(t.properties&&!(a in t.properties))continue;const{[a]:o,...i}=e;return t=B(t,r,n,a,o),Z(i,t,r,n)}return t}function I(e,t){if(!t||!Array.isArray(t))return e;t.forEach(((r,n)=>{e.properties[r]||t.splice(n,1)}));const r=Array.isArray(e.required)?Array.from(new Set([...e.required,...t])):t;return{...e,required:r}}function B(e,t,r,n,a){const{oneOf:o,...i}=F(a,t,r);if(e=D(e,i),void 0===o)return e;if(!Array.isArray(o))throw new Error(`invalid: it is some ${typeof o} instead of an array`);const u=o.map((e=>x(e,"$ref")?N(e,t,r):e));return T(e,t,r,n,u)}function T(e,t,r,n,a){const o=a.filter((e=>{if(!e.properties)return!1;const{[n]:t}=e.properties;if(t){const e={type:"object",properties:{[n]:t}},{errors:a}=j(e,r);return!a||0===a.length}}));if(1!==o.length)return console.warn("ignoring oneOf in dependencies because there isn't exactly one subschema that is valid"),e;const i=o[0],{[n]:u,...l}=i.properties,s={...i,properties:l};return D(e,F(s,t,r))}function D(e,t){const r=Object.assign({},e);return Object.keys(t).reduce(((r,n)=>{const a=e?e[n]:{},o=t[n];return e&&x(e,n)&&O(o)?r[n]=D(a,o):e&&t&&("object"===M(e)||"object"===M(t))&&"required"===n&&Array.isArray(a)&&Array.isArray(o)?r[n]=W()(a,o):r[n]=o,r}),r)}function M(e){const{type:t}=e;if(!t&&e.const)return L(e.const);if(!t&&e.enum)return"string";if(!t&&(e.properties||e.additionalProperties))return"object";const r=t;return r instanceof Array&&2===r.length&&r.includes("null")?r.find((e=>"null"!==e)):t}const L=function(e){return Array.isArray(e)?"array":"string"===typeof e?"string":null==e?"null":"boolean"===typeof e?"boolean":isNaN(e)?"object"===typeof e?"object":"string":"number"};function $(e,t){for(let r=0;r<t.length;r++){const n=t[r];if(n.properties){const t={anyOf:Object.keys(n.properties).map((e=>({required:[e]})))};let a;if(n.anyOf){const{...e}=n;e.allOf?e.allOf=e.allOf.slice():e.allOf=[],e.allOf.push(t),a=e,console.log(a)}else a=Object.assign({},n,t),console.log(a);if(delete a.required,j(a,e).valid)return console.log("type为object，能匹配,"+r),r}else if(j(t[r],e).valid)return console.log("type为其他类型，能匹配,"+r),r}return 0}function Y(e,t,r=0){const n=t.split(".");for(let a=0;a<n.length-r;a+=1){if(void 0===e)return;e=""===n[a]?e:e[n[a]]}return e}const H=/{{(.*)}}/;function z(e,t,r,n){if(void 0===r)return;const a=H.exec(r);if(H.lastIndex=0,a){const r=a[1].trim(),n=new Function("parentFormData","rootFormData",`return ${r}`);return n(Y(e,t,1),e)}return n()}function G(e,t,r){const n=e?.widget,a=e?.hidden;return"HiddenWidget"===n||!!z(t,r,a,(()=>"function"===typeof a?a(Y(t,r,1),t):a))}function K(e,t){return""===e?t:[e,t].join(".")}const X=Symbol(),J=(0,o.aZ)({props:{theme:{type:Object,required:!0}},setup(e,{slots:t}){const r=(0,o.Fl)((()=>e.theme));return(0,o.JJ)(X,r),()=>{const e=r.value.wrapper?.Form?r.value.wrapper.Form:"div";return(0,o.Wm)(e,null,{default:()=>[t.default&&t.default()]})}}});function Q(e,t){const r=p();if(t){const{uiSchema:e,schema:n,customFormats:a}=t;if(e?.widget&&O(e?.widget))return(0,i.iH)(e.widget);if(n.format&&r.formatMapRef.value[n.format])return(0,i.iH)(r.formatMapRef.value[n.format])}const n=(0,o.f3)(X);if(!n)throw new Error("vjsf theme is required");const a=(0,o.Fl)((()=>n.value.widgets[e]));return a}var ee=(0,o.aZ)({name:"NumberField",props:f,setup(e){const t=(0,o.Fl)((()=>{const t=Q(v.NumberWidget,e);return t.value})),r=t=>{e.onChange(t)};return()=>{const{value:n,schema:a,errorSchema:i,isRequired:u,uiSchema:l}=e,s=t.value;return(0,o.Wm)(s,{value:n,onChange:r,schema:a,errors:i.__errors||[],isRequired:u,uiSchema:l||{}},null)}}}),te=(0,o.aZ)({name:"StringField",props:f,setup(e){const t=(0,o.Fl)((()=>{const t=Q(v.TextWidget,e);return t.value}));return()=>{const{value:r,schema:n,errorSchema:a,isRequired:i,uiSchema:u}=e,l=t.value;return(0,o.Wm)(l,{value:r,onChange:e.onChange,schema:n,errors:a.__errors||[],isRequired:i,uiSchema:u||{}},null)}}});const re=(0,l.createUseStyles)({schemaTitle:{color:"#39828f",fontWeight:600,fontSize:20,padding:"7px 0",marginBottom:15},objTitle:{color:"#5f5d5e",fontWeight:600,fontSize:16,padding:"7px 0",borderBottom:"1px solid #eeeeee",marginBottom:15}});var ne=(0,o.aZ)({name:"ObjectField",props:f,setup(e){const t=re(),r=p(),n=(t,r)=>{const n=O(e.value)?e.value:{};void 0===r?delete n[t]:n[t]=r,e.onChange(n)};return()=>{const a=t.value,{SchemaItem:i}=r,{schema:u,rootSchema:l,value:s,errorSchema:c,uiSchema:d,curNodePath:p,rootFormData:m}=e,f=u.properties||{},h=(Array.isArray(u.required)?u.required:[u.required])||[],_=O(s)?s:{};return(0,o.Wm)("div",null,[(0,o.Wm)("div",{class:u===l?a.schemaTitle:a.objTitle},[u.title||"标题"]),Object.keys(f).map(((e,t)=>(0,o.Wm)(i,{schema:f[e],rootSchema:l,value:_[e],key:t,onChange:t=>n(e,t),errorSchema:c[e]||{k:null},uiSchema:d?.properties&&d.properties[e]||{},isRequired:-1!==h.findIndex((t=>t===e)),curNodePath:K(p,e),rootFormData:m},null)))])}}});const ae=(0,l.createUseStyles)({actions:{background:"#F9F9F9",padding:5,textAlign:"right"},action:{color:"#ffffff",backgroundColor:"#39828f","&:hover":{backgroundColor:"#619ba5",color:"#ffffff"},"& + &":{marignRight:10}},content:{padding:10}}),oe=(0,o.aZ)({name:"ArrayItemWrapper",props:{onAdd:{type:Function,required:!0},onDelete:{type:Function,required:!0},onUp:{type:Function,required:!0},onDown:{type:Function,required:!0},index:{type:Number,required:!0}},setup(e,{slots:t}){const r=ae(),n=(0,o.f3)(X);if(!n)throw new Error("vjsf theme is required");const a=(0,o.Fl)((()=>n.value.wrapper?.Btn?n.value.wrapper?.Btn:"button")),i=(0,o.Fl)((()=>n.value.wrapper?.Btn?"small":""));return()=>{const n=r.value,u=a.value,l=i.value,s=()=>{e.onAdd(e.index)},c=()=>{e.onDelete(e.index)},d=()=>{e.onUp(e.index)},p=()=>{e.onDown(e.index)};return(0,o.Wm)("div",{class:"arrayItem"},[(0,o.Wm)("div",{class:n.content},[t.default&&t.default()]),(0,o.Wm)("div",{class:n.actions},[(0,o.Wm)(u,{class:["addBtn",n.action],size:l,onClick:s},{default:()=>[(0,o.Uk)("新增")]}),(0,o.Wm)(u,{class:["deleteBtn",n.action],size:l,onClick:c},{default:()=>[(0,o.Uk)("删除")]}),(0,o.Wm)(u,{class:["downBtn",n.action],size:l,onClick:p},{default:()=>[(0,o.Uk)("下移")]}),(0,o.Wm)(u,{class:["upBtn",n.action],size:l,onClick:d},{default:()=>[(0,o.Uk)("上移")]})])])}}});var ie=(0,o.aZ)({name:"ArrayField",props:f,setup(e){const t=p(),r=(t,r)=>{const{value:n}=e;let a;r?(a=Array.isArray(n)?n:[n],a[r]=t):a=Array.isArray(t)?t:[t],e.onChange(a)},n=t=>{const{value:r}=e,n=Array.isArray(r)?r:[];n.splice(t+1,0,void 0),e.onChange(n)},a=t=>{const{value:r}=e,n=Array.isArray(r)?r:[];n.splice(t,1),e.onChange(n)},i=t=>{if(0===t)return;const{value:r}=e,n=Array.isArray(r)?r:[],a=n.splice(t,1);n.splice(t-1,0,a[0]),e.onChange(n)},u=t=>{const{value:r}=e,n=Array.isArray(r)?r:[];if(t===n.length-1)return;const a=n.splice(t,1);n.splice(t+1,0,a[0]),e.onChange(n)},l=Q(v.SelectWidget,e),s=Q(v.RadioWidget,e),c=Q(v.CheckboxWidget,e);return()=>{const{schema:d,rootSchema:p,value:m,errorSchema:f,uiSchema:h}=e,_=t.SchemaItem,g=l.value,v=s.value,y=c.value,b=Array.isArray(d.items),w=d.items&&d.items.enum,S=d.items,W=Array.isArray(m)?m:[];if(b)return S.map(((t,n)=>{const a=h?.items,i=Array.isArray(a)?a[n]||{}:a||{};return(0,o.Wm)(_,(0,o.dG)(e,{schema:t,rootSchema:p,value:W[n],key:n,errorSchema:f[n]||{},onChange:e=>{r(e,n)},uiSchema:i}),null)}));if(w){const e=d.items.enum,t=e.map((e=>({value:e,label:e}))),n=W.length>1?y:e.length<=4?v:g;return(0,o.Wm)("div",null,[t&&(0,o.Wm)(n,{value:W,schema:d,onChange:(e,t)=>{r(e,t)},errors:f.__errors||[],options:t||[],uiSchema:h},null)])}{const t=Array.isArray(m)?m:[];return t.map(((t,l)=>(0,o.Wm)(oe,{index:l,onAdd:n,onDelete:a,onUp:i,onDown:u},{default:()=>[(0,o.Wm)(_,(0,o.dG)(e,{schema:d.items,rootSchema:p,value:t,key:l,errorSchema:f[l]||{},onChange:e=>{r(e,l)},uiSchema:h?.items||{}}),null)]})))}}}}),ue=(0,o.aZ)({name:"IntegerField",props:f,setup(e){const t=(0,o.Fl)((()=>{const t=Q(v.IntegerWidget,e);return t.value})),r=t=>{e.onChange(t)};return()=>{const{value:n,schema:a,errorSchema:i,isRequired:u,uiSchema:l}=e,s=t.value;return(0,o.Wm)(s,{value:n,onChange:r,schema:a,errors:i.__errors||[],isRequired:u,uiSchema:l||{}},null)}}}),le=(0,o.aZ)({name:"BooleanField",props:f,setup(e){const t=(0,o.Fl)((()=>{const t=Q(v.BooleanWidget,e);return t.value}));return()=>{const{value:r,schema:n,onChange:a,errorSchema:i,isRequired:u,uiSchema:l}=e,s=t.value;return(0,o.Wm)(s,{value:r,onChange:a,schema:n,errors:i.__errors||[],isRequired:u,uiSchema:l||{}},null)}}}),se=(0,o.aZ)({name:"MultiSchemaField",props:h,setup(e){const t=e.options||[],r=(0,i.iH)(0);(0,o.m0)((()=>{const n=$(e.value,t);r.value=0!==n?n:r.value?r.value:0}));const n=(0,o.Fl)((()=>{const e=t[r.value]||null;return e?e.type?e:Object.assign({},e,{type:"object"}):{}})),a=(0,o.Fl)((()=>{const t=Q(v.SelectWidget,e);return t.value})),u=t.map(((e,t)=>({label:e.title||`Option ${t+1}`,value:t}))),l=p(),s=e=>{r.value=e};return()=>{const{value:t,schema:i,errorSchema:c,isRequired:d,rootSchema:p,uiSchema:m}=e,{SchemaItem:f}=l,h=r.value,_=n.value,g=a.value;return(0,o.Wm)("div",null,[(0,o.Wm)(g,{value:h,onChange:s,schema:i,errors:c.__errors||[],isRequired:d,options:u,uiSchema:m||{}},null),null!==h&&(0,o.Wm)(f,(0,o.dG)(e,{schema:_,rootSchema:p,value:t}),null)])}}});const ce=(0,l.createUseStyles)({hidden:{display:"none"}});var de=(0,o.aZ)({name:"SchemaItem",props:f,setup(e){const t=(0,o.Fl)((()=>{const{schema:t,rootSchema:r,value:n}=e;return console.log(F(t,r,n)),F(t,r,n)})),r=t=>{e.onChange(t)},n=(0,o.Fl)((()=>G(e.uiSchema,e.rootFormData,e.curNodePath))),a=ce();return()=>{const i=a.value,u=n.value,{value:l,errorSchema:s,uiSchema:c,isRequired:d,rootFormData:p,rootSchema:f}=e,h=t.value;console.log(h);const _=h.type;let g,v;if(h.oneOf||h.anyOf)g=se,v=h.oneOf||h.anyOf||void 0;else switch(_){case m.STRING:g=te;break;case m.NUMBER:g=ee;break;case m.OBJECT:g=ne;break;case m.ARRAY:g=ie;break;case m.INTEGER:g=ue;break;case m.BOOLEAN:g=le;break;default:console.warn(`${_} is not supported`)}return(0,o.Wm)(g,{class:u?i.hidden:"",value:l,schema:h,options:v,onChange:r,uiSchema:c||{},errorSchema:s||{},isRequired:d,rootSchema:f,rootFormData:p},null)}}}),pe=r(3590),me=r.n(pe);function fe(e){return null===e||void 0===e?[]:e.map((({keyword:e,instancePath:t,schemaPath:r,params:n,message:a})=>({name:e,property:`${t}`,schemaPath:r,params:n,message:a})))}function he(e){return e.length<1||void 0===e?{}:e.reduce(((e,t)=>{const{property:r,message:n}=t;let a=e;const o=r.split("/");o.length>0&&""===o[0]&&o.splice(0,1);for(const i of o)i in a||(a[i]={}),a=a[i];return Array.isArray(a.__errors)?a.__errors=a.__errors.concat(n||""):n&&(a.__errors=[n]),e}),{})}async function _e(e,t,r,n,a){let o=null;try{e.validate(r,t)}catch(c){o=c}me()[n](e.errors);const i=fe(e.errors);if(o){if(!i.length){const e=o.message;return{errors:{message:e},errorSchema:{__errors:{message:e}},valid:void 0}}i.push({message:o.message})}const u=he(i);if(!a)return{errors:i,errorSchema:u,valid:0===i.length};const l=ge();await a(t,l);const s=ve(u,l,!1);return{errors:i,errorSchema:s,valid:0===i.length}}function ge(){const e={};return new Proxy(e,{get(e,t,r){if("addErr"===t)return t=>{const n=Reflect.get(e,"__errors",r);n&&Array.isArray(n)?n.push(t):e.__errors=[t]};const n=Reflect.get(e,t,r);if(void 0===n){const r=ge();return e[t]=r,r}return n}})}function ve(e,t,r=!1){const n=Object.assign({},e);return Object.keys(t).reduce(((n,a)=>{const o=e?e[a]:{},i=t[a];return e&&e.hasOwnProperty(a)&&O(i)?n[a]=ve(o,i,r):r&&Array.isArray(o)&&Array.isArray(i)?n[a]=o.concat(i):n[a]=i,n}),n)}var ye=(0,o.aZ)({name:"SchemaForm",props:{schema:{type:Object,required:!0},value:{required:!0},onChange:{type:Function,required:!0},contextRef:{type:Object},ajvOpts:{type:Object},locale:{type:String,default:"zh"},customValidate:{type:Function},uiSchema:{type:Object},customFormats:{type:[Array,Object]},customKeyword:{type:[Array,Object]},rootFormData:{default:{}},curNodePath:{default:""}},setup(e){const t=t=>{e.onChange(t)},r=(0,o.Fl)((()=>{if(e.customFormats){const t=Array.isArray(e.customFormats)?e.customFormats:[e.customFormats];return t.reduce(((e,t)=>(e[t.name]=t.component,e)),{})}return{}})),n={SchemaItem:de,formatMapRef:r};(0,o.JJ)(d,n);const a={allErrors:!0},u=(0,i.XI)(),l=(0,i.XI)({});(0,o.m0)((()=>{if(u.value=new(b())({...a,...e.ajvOpts}),e.customFormats){const t=Array.isArray(e.customFormats)?e.customFormats:[e.customFormats];t.forEach((e=>{u.value.addFormat(e.name,e.definition)}))}if(e.customKeyword){const t=Array.isArray(e.customKeyword)?e.customKeyword:[e.customKeyword];t.forEach((e=>{u.value.addKeyword(e)}))}}));const s=(0,i.iH)(),c=(0,i.iH)(0);async function p(){console.log("<--------- start validate --------\x3e");const t=c.value+=1,r=await _e(u.value,e.value,e.schema,e.locale,e.customValidate);t===c.value&&(console.log("<--------- end validate --------\x3e"),l.value=r.errorSchema,s.value(r),s.value=void 0)}return(0,o.YP)((()=>{e.contextRef}),(()=>{e.contextRef&&(e.contextRef.value={doValidate(){return new Promise((e=>{s.value=e,p()}))}})}),{immediate:!0}),(0,o.YP)((()=>e.value),(()=>{s.value&&p()}),{deep:!0}),()=>{const{schema:r,value:n,uiSchema:a,rootFormData:i,curNodePath:u}=e,s=l.value;return(0,o.Wm)(de,{schema:r,rootSchema:r,value:n,onChange:t,errorSchema:s,uiSchema:a||{},rootFormData:i,curNodePath:u},null)}}}),be={name:"Simple",schema:{description:"简单数据样例",title:"个人资料",type:"object",required:["name","mobile"],properties:{name:{type:"string",title:"昵称",default:"小李"},age:{type:"number",title:"年龄"},mobile:{type:"string",minLength:11,title:"手机号码"},city:{type:"string",title:"现居地"},defaultAddress:{type:"boolean",title:"设为默认地址",default:!0}}},uiSchema:{},default:{name:"小张",age:"33",mobile:"13122863836",city:"深圳",defaultAddress:!1}},we={name:"Nested",schema:{description:"嵌套数据",title:"用户信息",type:"object",properties:{name:{type:"object",required:["firstName","lastName"],title:"申请人姓名",properties:{firstName:{type:"string",minLength:1,title:"姓"},lastName:{type:"string",minLength:1,title:"名",default:"Last"}},errorMessage:{firstName:"至少有个字符吧"}},contactInfo:{type:"object",title:"联系方式",required:["phone","email"],properties:{phone:{type:"string",description:"不少于11位",minLength:11,title:"手机号码"},email:{type:"string",title:"邮箱"}}}},errorMessage:"这是一个简单的错误"},uiSchema:{},default:{name:{firstName:"李",lastName:"四"},contactInfo:{phone:"13121556960",email:"lisi0908@gmail.com"}}},Se={name:"Arrays",schema:{description:"常用的数组类型数据校验Schema",type:"object",title:"数组",properties:{name:{type:"string",minLength:1,title:"用户名",default:"user001"},interest:{type:"array",title:"感兴趣的领域",items:{type:"string",enum:["金融","体育","社会","影视","文化","生活方式"]}}}},uiSchema:{},default:{name:"maze",interest:["社会","体育"]}};const We=(0,l.createUseStyles)({errorText:{color:"red",fontSize:12,margin:"2px 0  5px"},list:{listStyleType:"none",padding:0,margin:"0 0 15px 0"},content:{padding:"5px 0"}});function ke(e){const t=(0,o.aZ)({name:"FormItem",props:_,setup(e,{slots:t}){const r=We();return()=>{const{schema:n,errors:a,isRequired:i}=e,u=r.value;return(0,o.Wm)("div",null,[(0,o.Wm)((0,o.up)("el-form-item"),{label:n.title,required:i},{default:()=>[(0,o.Wm)("div",{class:u.content},[t.default&&t.default()])]}),(0,o.Wm)("ul",{class:u.list},[a?.map((e=>(0,o.Wm)("li",{class:u.errorText},[e])))])])}}});return(0,o.aZ)({name:`Wrapped${e.name}`,props:_,setup(r,{attrs:n}){return()=>(0,o.Wm)(t,r,{default:()=>[(0,o.Wm)(e,(0,o.dG)(r,n),null)]})}})}var qe=ke((0,o.aZ)({name:"SliderWidget",props:_,setup(e){const t=(0,i.iH)(e.value||0);return(0,o.YP)(t,((t,r)=>{r!==t&&e.onChange(t)})),(0,o.YP)((()=>{e.value}),(e=>{e!==t.value&&(t.value=e)})),()=>{const r=e.schema.minimum,n=e.schema.maximum,a=e.schema.multipleOf;return(0,o.Wm)((0,o.up)("el-slider"),{min:r||0,max:n||100,modelValue:t.value,"onUpdate:modelValue":e=>t.value=e,step:a||1},null)}}})),Oe={name:"Number",schema:{description:"数字类型数据样例",title:"统计",type:"object",required:["rating","age"],properties:{rating:{type:"number",title:"评分",default:0},age:{type:"integer",title:"年龄",default:20},service:{type:"integer",title:"服务满意度",maximum:100,minimum:0},delivery:{type:"integer",title:"配送满意度",maximum:100,minimum:0,multipleOf:10}}},uiSchema:{properties:{service:{widget:qe},delivery:{widget:qe}}},default:{rating:85.6,age:20,service:50,delivery:60}},xe={name:"References",schema:{description:"Schema 引用与递归调用",title:"商品订单",definitions:{address:{type:"object",required:["street","city","state"],properties:{street:{type:"string",title:"街道"},city:{type:"string",title:"城市"},province:{type:"string",title:"省份"}}},goodsInfo:{type:"object",properties:{name:{type:"string",title:"名称",minLength:2},children:{type:"array",items:{$ref:"#/definitions/goodsInfo"}}}}},type:"object",properties:{billing_address:{title:"账单寄送地址",$ref:"#/definitions/address"},shipping_address:{title:"收货地址",$ref:"#/definitions/address"},goods:{title:"商品详情",$ref:"#/definitions/goodsInfo"}}},uiSchema:{},default:{billing_address:{street:"南山大道2066号",city:"深圳市",province:"广东省"},shipping_address:{street:"龙吴路33号",city:"上海",province:"上海市"},goods:{name:"小天鹅洗烘套装组合",children:[{name:"小天鹅洗衣机"},{name:"小天鹅烘干机"}]}}},Ce={name:"Dependencies",schema:{description:"表单字段的联动",type:"object",properties:{name:{type:"string",title:"姓名",minLength:1},gender:{type:"array",title:"性别",items:{type:"string",enum:["男","女"]}}},dependentRequired:{gender:["name"]}},uiSchema:{},default:{gender:["女"]}},je={name:"OneOf",schema:{description:"在多个schema中只符合其中一个schema即可通过校验",title:"oneOf",type:"object",oneOf:[{properties:{address:{type:"string",minLength:5,title:"地址"}},required:["address"]},{properties:{phone:{type:"string",minLength:11,title:"手机"}},required:["phone"]}]},uiSchema:{},default:{age:"ddddddd"}},Ae={name:"AnyOf",schema:{description:"在多个schema中至少符合一个schema即可通过校验",title:"anyOf",type:"object",anyOf:[{properties:{address:{type:"string",minLength:5,title:"地址"}}},{properties:{phone:{type:"string",minLength:11,title:"手机"}}}]},uiSchema:{},default:{address:"ddddddd"}},Fe=ke((0,o.aZ)({name:"ColorPickerWidget",props:_,setup(e){const t=(0,i.iH)(e.value);return(0,o.YP)(t,((t,r)=>{r!==t&&e.onChange(t)})),(0,o.YP)((()=>{e.value}),(()=>{e.value!==t.value&&(t.value=e.value)}),{deep:!0}),()=>(0,o.Wm)((0,o.up)("el-color-picker"),{modelValue:t.value,"onUpdate:modelValue":e=>t.value=e},null)}})),Pe=ke((0,o.aZ)({name:"DatePickerWidget",props:_,setup(e){const t=(0,i.iH)(e.value);return(0,o.YP)(t,((t,r)=>{r!==t&&e.onChange(t)})),(0,o.YP)((()=>{e.value}),(()=>{e.value!==t.value&&(t.value=e.value)}),{deep:!0}),()=>(0,o.Wm)((0,o.up)("el-date-picker"),{modelValue:t.value,"onUpdate:modelValue":e=>t.value=e,placeholder:"Select date and time"},null)}})),Re=ke((0,o.aZ)({name:"PasswordWidget",props:_,setup(e){function t(t){e.onChange(t)}return()=>{let r;return r=e.value,(0,o.Wm)((0,o.up)("el-input"),{type:"password",onInput:t,modelValue:r,"onUpdate:modelValue":e=>r=e},null)}}})),Ne={name:"Widgets",schema:{description:"利用uiSchema扩展自定义小控件",title:"widgets",type:"object",properties:{color:{type:"string",title:"颜色",default:"#FFFFFF"},dateTime:{type:"string",title:"日期",default:""},password:{type:"string",title:"密码"}}},uiSchema:{properties:{color:{widget:Fe},dateTime:{widget:Pe},password:{widget:Re}}},default:{color:"#409EFF",dateTime:"",password:"123456"}};const Ee=(0,l.createUseStyles)({btn:{margin:"10px 0 10px",padding:"7px 10px",fontSize:"14px",color:"#fff",backgroundColor:"#39828f",border:0,borderRadius:"4px",cursor:"pointer","&:hover":{backgroundColor:"#619ba5",color:"#fff"},"&:focus":{backgroundColor:"#39828f",color:"#fff"}}});var Ue=ke((0,o.aZ)({name:"UploadWidget",props:_,setup(e){const t=(0,i.iH)(e.uiSchema&&e.uiSchema.action?e.uiSchema.action:""),r=(0,i.iH)([{name:"文件1",url:e.value}]),n=Ee();return()=>{const e=n.value,a=t.value,i=r.value;return(0,o.Wm)((0,o.up)("el-upload"),{action:a,fileList:i},{default:()=>[(0,o.Wm)((0,o.up)("el-button"),{type:"primary",class:e.btn},{default:()=>[(0,o.Uk)("点击上传")]})]})}}})),Ve={name:"Files",schema:{description:"上传文件",title:"files",type:"object",properties:{single:{type:"string",title:"单个文件",default:"http://img.alicdn.com/tfs/TB1vYlkdnZmx1VjSZFGXXax2XXa-468-644.jpg_320x5000q100.jpg_.webp"}}},uiSchema:{properties:{single:{widget:Ue,action:"https://run.mocky.io/v3/9d059bf9-4660-45f2-925d-ce80ad6c4d15"}}},default:{single:"http://img.alicdn.com/tfs/TB1vYlkdnZmx1VjSZFGXXax2XXa-468-644.jpg_320x5000q100.jpg_.webp"}},Ze={name:"CustomFormat",schema:{description:"自定义 format 关键字",title:"自定义format关键字",type:"object",properties:{email:{type:"string",format:"email",title:"邮箱地址"},url:{type:"string",format:"url",title:"URL"}}},uiSchema:{},default:{email:"yyw3334@126.com",url:"https://www.mazel98.com"}},Ie={name:"Hidden(表单联动)",schema:{description:"通过控制开关隐藏/展示相关表单",title:"隐藏表单",type:"object",properties:{showMore:{title:"显示更多表单",type:"boolean",default:!1},x1:{title:"隐藏表单1",type:"string",default:"请输入..."}}},uiSchema:{properties:{x1:{hidden:"{{rootFormData.showMore === false}}"}}},default:{showMore:!0}},Be=[be,we,Oe,Se,xe,Ce,je,Ae,Ne,Ve,Ze,Ie],Te=ke((0,o.aZ)({name:"SelectWidget",props:g,setup(e){let t=(0,i.iH)(e.value);return(0,o.YP)(t,((t,r)=>{r!==t&&e.onChange(t)})),(0,o.YP)((()=>{e.value}),(()=>{e.value!==t.value&&(t.value=e.value)}),{deep:!0}),()=>{const{options:r}=e;return(0,o.Wm)((0,o.up)("el-select"),{modelValue:t.value,"onUpdate:modelValue":e=>t.value=e},{default:()=>[r?.map((e=>(0,o.Wm)((0,o.up)("el-option"),{label:e.label,value:e.value},null)))]})}}})),De=ke((0,o.aZ)({name:"TextWidget",props:_,setup(e){const t=t=>{e.onChange(t)};return()=>{let r;return r=e.value,(0,o.Wm)("div",null,[(0,o.Wm)((0,o.up)("el-input"),{type:"text",onInput:t,modelValue:r,"onUpdate:modelValue":e=>r=e},null)])}}})),Me=ke((0,o.aZ)({name:"NumberWidget",props:_,setup(e){const t=t=>{const r=Number(t);t=e.value,Number.isNaN(r)?e.onChange(void 0):e.onChange(r)};return()=>{let r;return r=e.value,(0,o.Wm)("div",null,[(0,o.Wm)((0,o.up)("el-input"),{type:"number",onInput:t,modelValue:r,"onUpdate:modelValue":e=>r=e},null)])}}})),Le=ke((0,o.aZ)({name:"RadioWidget",props:g,setup(e){const t=(0,i.iH)(e.value||[]);return(0,o.YP)(t,((t,r)=>{r!==t&&e.onChange(t)})),(0,o.YP)((()=>{e.value}),(e=>{e!==t.value&&(t.value=e)})),()=>{const{options:r}=e,n=t.value;return(0,o.Wm)((0,o.up)("el-radio-group"),{modelValue:n[0],"onUpdate:modelValue":e=>n[0]=e},{default:()=>[r?.map((e=>(0,o.Wm)((0,o.up)("el-radio"),{label:e.label},{default:()=>[e.value]})))]})}}})),$e=ke((0,o.aZ)({name:"CheckboxWidget",props:g,setup(e){const t=(0,i.iH)(e.value||[]);return(0,o.YP)(t,((t,r)=>{r!==t&&e.onChange(t,void 0)})),(0,o.YP)((()=>{e.value}),(()=>{e.value!==t.value&&(t.value=e.value)}),{deep:!0}),()=>{const{options:r}=e;return(0,o.Wm)((0,o.up)("el-checkbox-group"),{modelValue:t.value,"onUpdate:modelValue":e=>t.value=e},{default:()=>[r?.map((e=>(0,o.Wm)((0,o.up)("el-checkbox"),{label:e.label},null)))]})}}})),Ye=ke((0,o.aZ)({name:"IntegerWidget",props:_,setup(e){const t=t=>{const r=Number(t);t=e.value,Number.isNaN(r)?e.onChange(void 0):e.onChange(r)};return()=>{let r;return r=e.value,(0,o.Wm)((0,o.up)("el-input"),{type:"integer",onInput:t,modelValue:r,"onUpdate:modelValue":e=>r=e},null)}}})),He=ke((0,o.aZ)({name:"BooleanWidget",props:_,setup(e){let t=(0,i.iH)(e.value||!0);return(0,o.YP)(t,((t,r)=>{r!==t&&e.onChange(t)})),(0,o.YP)((()=>{e.value}),(()=>{e.value!==t.value&&(t.value=e.value)}),{deep:!0}),()=>(0,o.Wm)((0,o.up)("el-switch"),{modelValue:t.value,"onUpdate:modelValue":e=>t.value=e},null)}})),ze=(0,o.aZ)({name:"FormWrapper",props:{},setup(e,{slots:t}){return()=>(0,o.Wm)((0,o.up)("el-card"),{shadow:"hover"},{default:()=>[(0,o.Wm)((0,o.up)("el-form"),{"label-position":"left"},{default:()=>[t.default&&t.default()]})]})}}),Ge=(0,o.aZ)({name:"BtnWrapper",props:{},setup(e,{slots:t}){return()=>(0,o.Wm)((0,o.up)("el-button"),null,{default:()=>[t.default&&t.default()]})}}),Ke={widgets:{SelectWidget:Te,TextWidget:De,NumberWidget:Me,RadioWidget:Le,CheckboxWidget:$e,IntegerWidget:Ye,BooleanWidget:He},wrapper:{Form:ze,Btn:Ge}};const Xe=[{name:"email",definition:{type:"string",validate:/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/},component:ke((0,o.aZ)({name:"EmailWidget",props:_,setup(e){function t(t){e.onChange(t)}return()=>{let r;return r=e.value,(0,o.Wm)((0,o.up)("el-input"),{type:"email",onInput:t,modelValue:r,"onUpdate:modelValue":e=>r=e},null)}}}))},{name:"url",definition:{type:"string",validate:/(https?|ftp|file):\/\/[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]/},component:ke((0,o.aZ)({name:"UrlWidget",props:_,setup(e){function t(t){e.onChange(t)}return()=>{let r;return r=e.value,(0,o.Wm)((0,o.up)("el-input"),{type:"url",onInput:t,modelValue:r,"onUpdate:modelValue":e=>r=e},null)}}}))}];var Je=Xe,Qe=r(8339);const et=(0,l.createUseStyles)({container:{display:"flex",flexDirection:"column",height:"100%",margin:"0 auto",width:"1300px"},title:{color:"#5f5d5e"},menu:{dsiplay:"flex"},menuButton:{color:"white",padding:"8px 12px",margin:"10px 20px 30px 0",backgroundColor:"#39828f",border:0,borderRadius:"5px",cursor:"pointer","&:hover":{backgroundColor:"#619ba5"}},content:{display:"flex"},code:{width:800,flexShrink:0},uiAndValue:{display:"flex",justifyContent:"space-between","& > *":{width:"48%"}},form:{flexGrow:1,marginLeft:40},codePanel:{margin:"0 0 20px 0",minHeight:300},validateBtn:{margin:"25px 0 10px",padding:"7px 10px",fontSize:"16px",color:"#fff",backgroundColor:"#39828f",border:0,borderRadius:"4px",cursor:"pointer","&:hover":{backgroundColor:"#619ba5"},"&:focus":{backgroundColor:"#39828f"}},btnContent:{color:"#fff"}});function tt(e){return JSON.stringify(e,null,2)}var rt=(0,o.aZ)({setup(){const e=(0,i.iH)(0),t=(0,i.qj)({schema:null,data:{},uiSchema:{},schemaCode:"",dataCode:"",uiSchemaCode:"",customValidate:void 0});(0,o.m0)((()=>{const r=e.value,n=Be[r];t.schema=n.schema,t.data=n.default,t.uiSchema=n.uiSchema,t.schemaCode=tt(n.schema),t.dataCode=tt(n.default),t.customValidate=n.customValidate,t.uiSchemaCode=tt(n.uiSchema)}));const r=et(),n=e=>{t.data=e,t.dataCode=tt(e)},a=(e,r)=>{try{const n=JSON.parse(r);t[e]=n,t[`${e}Code`]=r}catch(n){console.log(n)}},u=e=>a("schema",e),l=e=>a("data",e),s=e=>a("uiSchema",e),d=(0,i.iH)();function p(){d.value.doValidate().then((e=>{console.log(e)})).catch((e=>{console.error(e.message)}))}return()=>{const a=r.value,i=Ke.wrapper?.Btn?Ke.wrapper?.Btn:"button";return(0,o.Wm)("div",{class:a.container},[(0,o.Wm)("h1",{class:a.title},[(0,o.Uk)(" Vue3 JSON Schema Form ")]),(0,o.Wm)("div",{class:a.menu},[(0,o.Wm)("div",null,[Be.map(((t,r)=>(0,o.Wm)("button",{class:a.menuButton,onClick:()=>e.value=r},[t.name])))])]),(0,o.Wm)("div",{class:a.content},[(0,o.Wm)("div",{class:a.code},[(0,o.Wm)(c,{code:t.schemaCode,class:a.codePanel,onChange:u,title:"Schema"},null),(0,o.Wm)("div",{class:a.uiAndValue},[(0,o.Wm)(c,{code:t.uiSchemaCode,class:a.codePanel,onChange:s,title:"UISchema"},null),(0,o.Wm)(c,{code:t.dataCode,class:a.codePanel,onChange:l,title:"Value"},null)])]),(0,o.Wm)("div",{class:a.form},[(0,o.Wm)(J,{theme:Ke},{default:()=>[(0,o.Wm)(ye,{schema:t.schema,value:t.data,onChange:n,contextRef:d,customValidate:t.customValidate,uiSchema:t.uiSchema||{},customFormats:Je,customKeyword:Qe.Z,curNodePath:"",rootFormData:t.data},null),(0,o.Wm)(i,{class:a.validateBtn,onClick:p},{default:()=>[(0,o.Wm)("span",{class:a.btnContent},[(0,o.Uk)("校验")])]})]})])])])}}});const nt=(0,n.ri)(rt);nt.use(a.Z),nt.mount("#app")},8339:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var ajv__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3657),ajv__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(ajv__WEBPACK_IMPORTED_MODULE_0__);const keyword=[{keyword:"vjsf-hidden",type:"string",schemaType:"string",code(cxt){const{schema:schema,parentSchema:parentSchema}=cxt;eval(schema),cxt.fail(ajv__WEBPACK_IMPORTED_MODULE_0__._`!eval(schema)`)}}];__webpack_exports__["Z"]=keyword}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(r.exports,r,r.exports,__webpack_require__),r.loaded=!0,r.exports}__webpack_require__.m=__webpack_modules__,function(){__webpack_require__.amdO={}}(),function(){var e=[];__webpack_require__.O=function(t,r,n,a){if(!r){var o=1/0;for(s=0;s<e.length;s++){r=e[s][0],n=e[s][1],a=e[s][2];for(var i=!0,u=0;u<r.length;u++)(!1&a||o>=a)&&Object.keys(__webpack_require__.O).every((function(e){return __webpack_require__.O[e](r[u])}))?r.splice(u--,1):(i=!1,a<o&&(o=a));if(i){e.splice(s--,1);var l=n();void 0!==l&&(t=l)}}return t}a=a||0;for(var s=e.length;s>0&&e[s-1][2]>a;s--)e[s]=e[s-1];e[s]=[r,n,a]}}(),function(){__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return __webpack_require__.d(t,{a:t}),t}}(),function(){__webpack_require__.d=function(e,t){for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){__webpack_require__.f={},__webpack_require__.e=function(e){return Promise.all(Object.keys(__webpack_require__.f).reduce((function(t,r){return __webpack_require__.f[r](e,t),t}),[]))}}(),function(){__webpack_require__.u=function(e){return"js/"+e+".4f90c66c.js"}}(),function(){__webpack_require__.miniCssF=function(e){}}(),function(){__webpack_require__.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){__webpack_require__.hmd=function(e){return e=Object.create(e),e.children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e}}(),function(){__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="vue3-json-schema-form:";__webpack_require__.l=function(r,n,a,o){if(e[r])e[r].push(n);else{var i,u;if(void 0!==a)for(var l=document.getElementsByTagName("script"),s=0;s<l.length;s++){var c=l[s];if(c.getAttribute("src")==r||c.getAttribute("data-webpack")==t+a){i=c;break}}i||(u=!0,i=document.createElement("script"),i.charset="utf-8",i.timeout=120,__webpack_require__.nc&&i.setAttribute("nonce",__webpack_require__.nc),i.setAttribute("data-webpack",t+a),i.src=r),e[r]=[n];var d=function(t,n){i.onerror=i.onload=null,clearTimeout(p);var a=e[r];if(delete e[r],i.parentNode&&i.parentNode.removeChild(i),a&&a.forEach((function(e){return e(n)})),t)return t(n)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=d.bind(null,i.onerror),i.onload=d.bind(null,i.onload),u&&document.head.appendChild(i)}}}(),function(){__webpack_require__.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){__webpack_require__.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){__webpack_require__.p="/"}(),function(){var e={143:0};__webpack_require__.f.j=function(t,r){var n=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==n)if(n)r.push(n[2]);else{var a=new Promise((function(r,a){n=e[t]=[r,a]}));r.push(n[2]=a);var o=__webpack_require__.p+__webpack_require__.u(t),i=new Error,u=function(r){if(__webpack_require__.o(e,t)&&(n=e[t],0!==n&&(e[t]=void 0),n)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;i.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",i.name="ChunkLoadError",i.type=a,i.request=o,n[1](i)}};__webpack_require__.l(o,u,"chunk-"+t,t)}},__webpack_require__.O.j=function(t){return 0===e[t]};var t=function(t,r){var n,a,o=r[0],i=r[1],u=r[2],l=0;if(o.some((function(t){return 0!==e[t]}))){for(n in i)__webpack_require__.o(i,n)&&(__webpack_require__.m[n]=i[n]);if(u)var s=u(__webpack_require__)}for(t&&t(r);l<o.length;l++)a=o[l],__webpack_require__.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return __webpack_require__.O(s)},r=self["webpackChunkvue3_json_schema_form"]=self["webpackChunkvue3_json_schema_form"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var __webpack_exports__=__webpack_require__.O(void 0,[998],(function(){return __webpack_require__(1389)}));__webpack_exports__=__webpack_require__.O(__webpack_exports__)})();
//# sourceMappingURL=app.2d6c1b32.js.map